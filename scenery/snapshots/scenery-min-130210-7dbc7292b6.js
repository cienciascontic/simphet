'use strict';var phetDebug=!1,phet=phet||{};phet.assert=function(e,d){if(!e)throw Error("Assertion failed: "+d);};phet.debugAssert=function(e,d){if(phetDebug&&!e())throw Error("Assertion failed: "+d);};phet.util=phet.util||{};
(function(){phet.util.remove=function(e,d){e.splice(e.indexOf(d),1)};phet.util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};phet.util.foreach=function(e,d){for(var b=0;b<e.length;b++)d.call(void 0,e[b])};phet.util.map=function(e,d){var b=[];phet.util.foreach(e,function(a){b.push(d.call(void 0,a))});return b};phet.util.rangeInclusive=function(e,d){for(var b=Array(d-e+1),a=e;a<=d;a++)b[a]=a;return b};phet.util.mkString=function(e,d){var b="";d=void 0===d?", ":d;var a=
!0;phet.util.foreach(e,function(f){a||(b+=d);a=!1;b=void 0===f?b+"undefined":b+f.toString()});return b};phet.util.pairs=function(e){for(var d=[],b=e.length,a=0;a<b-1;a++)for(var f=e[a],c=a+1;c<b;c++)d.push([f,e[c]]);return d};phet.util.partition=function(e,d){for(var b=[],a=[],f=0;f<e.length;f++){var c=e[f];d.call(void 0,c)?b.push(c):a.push(c)}return[b,a]};phet.util.filter=function(e,d){for(var b=[],a=0;a<e.length;a++){var f=e[a];d.call(void 0,f)&&b.push(f)}return b};phet.util.unique=function(e,d){d||
(d=function(a,b){return a===b});for(var b=[],a=0;a<e.length;a++){for(var f=!0,c=e[a],n=0;n<b.length;n++)if(d(c,b[n])){f=!1;break}f&&b.push(c)}return b};phet.util.first=function(e,d){for(var b=0;b<e.length;b++)if(d(e[b]))return e[b]};phet.util.firstOrNull=function(e,d){var b=phet.util.first(e,d);return void 0===b?null:b};phet.util.subtract=function(e,d){return phet.util.filter(e,function(b){return-1===d.indexOf(b)})};phet.util.count=function(e,d){for(var b=0,a=0;a<e.length;a++)d(e[a])&&b++;return b}})();
(function(){phet.Object=phet.Object||{};phet.Object.create=Object.create||function(a){function b(){}if(1<arguments.length)throw Error("Object.create implementation only accepts the first parameter.");b.prototype=a;return new b};phet.Float32Array=window.Float32Array||Array;for(var e=0,d=["ms","moz","webkit","o"],b=0;b<d.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[d[b]+"RequestAnimationFrame"],phet.cancelAnimationFrame=window[d[b]+"CancelAnimationFrame"]||window[d[b]+
"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-e)),d=window.setTimeout(function(){a(b+c)},c);e=b+c;return d});phet.cancelAnimationFrame||(phet.cancelAnimationFrame=function(a){clearTimeout(a)})})();phet=phet||{};phet.model=phet.model||{};
(function(){phet.model.Property=function(d){this.observers=[];this.initialValue=this.value=d};var e=phet.model.Property;e.prototype={constructor:e,addObserver:function(d,b){this.observers.push(d);b&&d.call(void 0,this.value,this.value)},removeObserver:function(d){this.observers.splice(this.observers.indexOf(d),1)},notifyObservers:function(d,b){for(var a in this.observers)this.observers.hasOwnProperty(a)&&this.observers[a].call(void 0,d,b)},toString:function(){return this.value.toString()},get:function(){return this.value},
set:function(d){var b=this.value;if(null===d?null!==b:d!==b||d.equals&&d.equals(b))this.value=d,this.notifyObservers(b,this.value)},getInitialValue:function(){return this.initialValue}}})();phet=phet||{};phet.model=phet.model||{};
(function(){phet.model.Notifier=function(){this.listeners=[]};var e=phet.model.Notifier;e.prototype={constructor:e,addListener:function(b){this.listeners.push(b)},addUpdateListener:function(b,a){this.listeners.push(b);a&&b()},removeListener:function(b){this.listeners.splice(this.listeners.indexOf(b),1)},updateListeners:function(b){for(var a=0;a<this.listeners.length;a++)this.listeners[a](b)}};phet.model.CompositeNotifier=function(b){function a(a){f.updateListeners(a)}e.call(this);this.notifiers=b;
for(var f=this,c=0;c<b.length;c++)b[c].addListener(a)};var d=phet.model.CompositeNotifier;d.prototype=phet.Object.create(e.prototype);d.prototype.constructor=d})();phet=phet||{};phet.math=phet.math||{};phet.math.clamp=function(e,d,b){return e<d?d:e>b?b:e};phet.math.toRadians=function(e){return Math.PI*e/180};phet=phet||{};phet.math=phet.math||{};
(function(){phet.math.Vector2=function(b,a){this.x=b||0;this.y=a||0};var e=phet.math.Vector2;e.createPolar=function(b,a){return(new e(Math.cos(a),Math.sin(a))).timesScalar(b)};phet.math.Vector2.prototype={constructor:phet.math.Vector2,magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){return this.dot(this)},dot:function(b){return this.x*b.x+this.y*b.y},crossScalar:function(b){return this.magnitude()*b.magnitude()*Math.sin(this.getAngle()-b.getAngle())},normalized:function(){var b=
this.magnitude();if(0===b)throw Error("Cannot normalize a zero-magnitude vector");return new e(this.x/b,this.y/b)},timesScalar:function(b){return new e(this.x*b,this.y*b)},times:function(b){phet.assert(void 0===b.dimension);return this.timesScalar(b)},componentTimes:function(b){return new e(this.x*b.x,this.y*b.y)},plus:function(b){return new e(this.x+b.x,this.y+b.y)},plusScalar:function(b){return new e(this.x+b,this.y+b)},minus:function(b){return new e(this.x-b.x,this.y-b.y)},minusScalar:function(b){return new e(this.x-
b,this.y-b)},dividedScalar:function(b){return new e(this.x/b,this.y/b)},negated:function(){return new e(-this.x,-this.y)},angle:function(){return Math.atan2(this.x,this.y)},perpendicular:function(){return new e(this.y,-this.x)},angleBetween:function(b){return Math.acos(phet.math.clamp(this.normalized().dot(b.normalized()),-1,1))},rotated:function(b){return e.createPolar(this.magnitude(),this.getAngle+b)},toString:function(){return"Vector2("+this.x+", "+this.y+")"},toVector3:function(){return new phet.math.Vector3(this.x,
this.y)},set:function(b,a){this.x=b;this.y=a},setX:function(b){this.x=b},setY:function(b){this.y=b},copy:function(b){this.x=b.x;this.y=b.y},add:function(b){this.x+=b.x;this.y+=b.y},addScalar:function(b){this.x+=b;this.y+=b},subtract:function(b){this.x-=b.x;this.y-=b.y},subtractScalar:function(b){this.x-=b;this.y-=b},componentMultiply:function(b){this.x*=b.x;this.y*=b.y},divideScalar:function(b){this.x/=b;this.y/=b},negate:function(){this.x=-this.x;this.y=-this.y},equals:function(b,a){a||(a=0);return Math.abs(this.x-
b.x)+Math.abs(this.y-b.y)<=a},isVector2:!0,dimension:2};e.Immutable=function(b,a){this.x=b||0;this.y=a||0};var d=e.Immutable;d.prototype=new phet.math.Vector2;d.prototype.constructor=d;d.mutableOverrideHelper=function(b){d.prototype[b]=function(){throw Error("Cannot call mutable method '"+b+"' on immutable Vector2");}};d.mutableOverrideHelper("set");d.mutableOverrideHelper("setX");d.mutableOverrideHelper("setY");d.mutableOverrideHelper("copy");d.mutableOverrideHelper("add");d.mutableOverrideHelper("addScalar");
d.mutableOverrideHelper("subtract");d.mutableOverrideHelper("subtractScalar");d.mutableOverrideHelper("componentMultiply");d.mutableOverrideHelper("divideScalar");d.mutableOverrideHelper("negate");e.ZERO=new d(0,0);e.X_UNIT=new d(1,0);e.Y_UNIT=new d(0,1)})();phet=phet||{};phet.math=phet.math||{};
(function(){phet.math.Vector3=function(b,a,f){this.x=b||0;this.y=a||0;this.z=f||0};var e=phet.math.Vector3;phet.math.Vector3.prototype={constructor:phet.math.Vector3,magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){return this.dot(this)},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z},cross:function(b){return new e(this.y*b.z-this.z*b.y,this.z*b.x-this.x*b.z,this.x*b.y-this.y*b.x)},normalized:function(){var b=this.magnitude();if(0===b)throw Error("Cannot normalize a zero-magnitude vector");
return new e(this.x/b,this.y/b,this.z/b)},timesScalar:function(b){return new e(this.x*b,this.y*b,this.z*b)},times:function(b){phet.assert(void 0===b.dimension);return this.timesScalar(b)},componentTimes:function(b){return new e(this.x*b.x,this.y*b.y,this.z*b.z)},plus:function(b){return new e(this.x+b.x,this.y+b.y,this.z+b.z)},plusScalar:function(b){return new e(this.x+b,this.y+b,this.z+b)},minus:function(b){return new e(this.x-b.x,this.y-b.y,this.z-b.z)},minusScalar:function(b){return new e(this.x-
b,this.y-b,this.z-b)},dividedScalar:function(b){return new e(this.x/b,this.y/b,this.z/b)},negated:function(){return new e(-this.x,-this.y,-this.z)},angleBetween:function(b){return Math.acos(phet.math.clamp(this.normalized().dot(b.normalized()),-1,1))},toString:function(){return"Vector3("+this.x+", "+this.y+", "+this.z+")"},toVector2:function(){return new phet.math.Vector2(this.x,this.y)},toVector4:function(){return new phet.math.Vector4(this.x,this.y,this.z)},set:function(b,a,f){this.x=b;this.y=a;
this.z=f},setX:function(b){this.x=b},setY:function(b){this.y=b},setZ:function(b){this.z=b},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z},add:function(b){this.x+=b.x;this.y+=b.y;this.z+=b.z},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b},subtract:function(b){this.x-=b.x;this.y-=b.y;this.z-=b.z},subtractScalar:function(b){this.x-=b;this.y-=b;this.z-=b},componentMultiply:function(b){this.x*=b.x;this.y*=b.y;this.z*=b.z},divideScalar:function(b){this.x/=b;this.y/=b;this.z/=b},negate:function(){this.x=
-this.x;this.y=-this.y;this.z=-this.z},equals:function(b,a){a||(a=0);return Math.abs(this.x-b.x)+Math.abs(this.y-b.y)+Math.abs(this.z-b.z)<=a},isVector3:!0,dimension:3};e.Immutable=function(b,a,f){this.x=b||0;this.y=a||0;this.z=f||0};var d=e.Immutable;d.prototype=new phet.math.Vector3;d.prototype.constructor=d;d.mutableOverrideHelper=function(b){d.prototype[b]=function(){throw Error("Cannot call mutable method '"+b+"' on immutable Vector3");}};d.mutableOverrideHelper("set");d.mutableOverrideHelper("setX");
d.mutableOverrideHelper("setY");d.mutableOverrideHelper("setZ");d.mutableOverrideHelper("copy");d.mutableOverrideHelper("add");d.mutableOverrideHelper("addScalar");d.mutableOverrideHelper("subtract");d.mutableOverrideHelper("subtractScalar");d.mutableOverrideHelper("componentMultiply");d.mutableOverrideHelper("divideScalar");d.mutableOverrideHelper("negate");e.ZERO=new d(0,0,0);e.X_UNIT=new d(1,0,0);e.Y_UNIT=new d(0,1,0);e.Z_UNIT=new d(0,0,1)})();phet=phet||{};phet.math=phet.math||{};
(function(){phet.math.Vector4=function(b,a,f,c){this.x=b||0;this.y=a||0;this.z=f||0;this.w=void 0!==c?c:1};var e=phet.math.Vector4;phet.math.Vector4.prototype={constructor:phet.math.Vector4,magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){this.dot(this)},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z+this.w*b.w},normalized:function(){var b=this.magnitude();if(0===b)throw Error("Cannot normalize a zero-magnitude vector");return new e(this.x/b,this.y/
b,this.z/b,this.w/b)},timesScalar:function(b){return new e(this.x*b,this.y*b,this.z*b,this.w*b)},times:function(b){phet.assert(void 0===b.dimension);return this.timesScalar(b)},componentTimes:function(b){return new e(this.x*b.x,this.y*b.y,this.z*b.z,this.w*b.w)},plus:function(b){return new e(this.x+b.x,this.y+b.y,this.z+b.z,this.w+b.w)},plusScalar:function(b){return new e(this.x+b,this.y+b,this.z+b,this.w+b)},minus:function(b){return new e(this.x-b.x,this.y-b.y,this.z-b.z,this.w-b.w)},minusScalar:function(b){return new e(this.x-
b,this.y-b,this.z-b,this.w-b)},dividedScalar:function(b){return new e(this.x/b,this.y/b,this.z/b,this.w/b)},negated:function(){return new e(-this.x,-this.y,-this.z,-this.w)},angleBetween:function(b){return Math.acos(phet.math.clamp(this.normalized().dot(b.normalized()),-1,1))},toString:function(){return"Vector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},toVector3:function(){return new phet.math.Vector3(this.x,this.y,this.z)},set:function(b,a,f,c){this.x=b;this.y=a;this.z=f;this.w=c},setX:function(b){this.x=
b},setY:function(b){this.y=b},setZ:function(b){this.z=b},setW:function(b){this.w=b},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;this.w=b.w},add:function(b){this.x+=b.x;this.y+=b.y;this.z+=b.z;this.w+=b.w},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;this.w+=b},subtract:function(b){this.x-=b.x;this.y-=b.y;this.z-=b.z;this.w-=b.w},subtractScalar:function(b){this.x-=b;this.y-=b;this.z-=b;this.w-=b},componentMultiply:function(b){this.x*=b.x;this.y*=b.y;this.z*=b.z;this.w*=b.w},divideScalar:function(b){this.x/=
b;this.y/=b;this.z/=b;this.w/=b},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w},equals:function(b,a){a||(a=0);return Math.abs(this.x-b.x)+Math.abs(this.y-b.y)+Math.abs(this.z-b.z)+Math.abs(this.w-b.w)<=a},isVector4:!0,dimension:4};e.Immutable=function(b,a,f,c){this.x=b||0;this.y=a||0;this.z=f||0;this.w=void 0!==c?c:1};var d=e.Immutable;d.prototype=new phet.math.Vector4;d.prototype.constructor=d;d.mutableOverrideHelper=function(b){d.prototype[b]=function(){throw Error("Cannot call mutable method '"+
b+"' on immutable Vector4");}};d.mutableOverrideHelper("set");d.mutableOverrideHelper("setX");d.mutableOverrideHelper("setY");d.mutableOverrideHelper("setZ");d.mutableOverrideHelper("setW");d.mutableOverrideHelper("copy");d.mutableOverrideHelper("add");d.mutableOverrideHelper("addScalar");d.mutableOverrideHelper("subtract");d.mutableOverrideHelper("subtractScalar");d.mutableOverrideHelper("componentMultiply");d.mutableOverrideHelper("divideScalar");d.mutableOverrideHelper("negate");e.ZERO=new d(0,
0,0,0);e.X_UNIT=new d(1,0,0,0);e.Y_UNIT=new d(0,1,0,0);e.Z_UNIT=new d(0,0,1,0);e.W_UNIT=new d(0,0,0,1)})();phet=phet||{};phet.math=phet.math||{};
(function(){phet.math.Matrix3=function(a,b,c,d,e,g,k,p,m,q){this.entries=Array(9);this.rowMajor(void 0===a?1:a,b||0,c||0,d||0,void 0===e?1:e,g||0,k||0,p||0,void 0===m?1:m,q)};phet.math.Matrix3.Types={OTHER:0,IDENTITY:1,TRANSLATION_2D:2,SCALING:3,AFFINE:4};var e=phet.math.Matrix3,d=phet.math.Vector3,b=e.Types;e.identity=function(){return new e(1,0,0,0,1,0,0,0,1,b.IDENTITY)};e.translation=function(a,f){return new e(1,0,a,0,1,f,0,0,1,b.TRANSLATION_2D)};e.translationFromVector=function(a){return e.translation(a.x,
a.y)};e.scaling=function(a,f){return new e(a,0,0,0,void 0===f?a:f,0,0,0,1,b.SCALING)};e.rotationAxisAngle=function(a,f){var c=Math.cos(f),d=Math.sin(f),j=1-c;return new e(a.x*a.x*j+c,a.x*a.y*j-a.z*d,a.x*a.z*j+a.y*d,a.y*a.x*j+a.z*d,a.y*a.y*j+c,a.y*a.z*j-a.x*d,a.z*a.x*j-a.y*d,a.z*a.y*j+a.x*d,a.z*a.z*j+c,b.OTHER)};e.rotationX=function(a){var f=Math.cos(a);a=Math.sin(a);return new e(1,0,0,0,f,-a,0,a,f,b.OTHER)};e.rotationY=function(a){var f=Math.cos(a);a=Math.sin(a);return new e(f,0,a,0,1,0,-a,0,f,b.OTHER)};
e.rotationZ=function(a){var f=Math.cos(a);a=Math.sin(a);return new e(f,-a,0,a,f,0,0,0,1,b.AFFINE)};e.rotation2=e.rotationZ;e.fromSVGMatrix=function(a){return new e(a.a,a.c,a.e,a.b,a.d,a.f,0,0,1,b.AFFINE)};e.rotateAToB=function(a,b){var c,n,j=a.cross(b);c=a.dot(b);if(0.9999<(0>c?-c:c)){var g,k,j=new d(0<a.x?a.x:-a.x,0<a.y?a.y:-a.y,0<a.z?a.z:-a.z),j=j.x<j.y?j.x<j.z?d.X_UNIT:d.Z_UNIT:j.y<j.z?d.Y_UNIT:d.Z_UNIT;c=j.minus(a);j=j.minus(b);n=2/c.dot(c);g=2/j.dot(j);k=n*g*c.dot(j);return e.IDENTITY.plus(e.rowMajor(-n*
c.x*c.x-g*j.x*j.x+k*j.x*c.x,-n*c.x*c.y-g*j.x*j.y+k*j.x*c.y,-n*c.x*c.z-g*j.x*j.z+k*j.x*c.z,-n*c.y*c.x-g*j.y*j.x+k*j.y*c.x,-n*c.y*c.y-g*j.y*j.y+k*j.y*c.y,-n*c.y*c.z-g*j.y*j.z+k*j.y*c.z,-n*c.z*c.x-g*j.z*j.x+k*j.z*c.x,-n*c.z*c.y-g*j.z*j.y+k*j.z*c.y,-n*c.z*c.z-g*j.z*j.z+k*j.z*c.z))}var p,m,q;n=1/(1+c);g=n*j.x;k=n*j.z;p=g*j.y;m=g*j.z;q=k*j.y;return e.rowMajor(c+g*j.x,p-j.z,m+j.y,p+j.z,c+n*j.y*j.y,q-j.x,m-j.y,q+j.x,c+k*j.z)};e.prototype={constructor:e,rowMajor:function(a,f,c,d,e,g,k,p,m,q){this.entries[0]=
a;this.entries[1]=d;this.entries[2]=k;this.entries[3]=f;this.entries[4]=e;this.entries[5]=p;this.entries[6]=c;this.entries[7]=g;this.entries[8]=m;this.type=void 0===q?0===k&&0===p&&1===m?b.AFFINE:b.OTHER:q},columnMajor:function(a,b,c,d,e,g,k,p,m,q){this.rowMajor(a,d,k,b,e,p,c,g,m,q)},m00:function(){return this.entries[0]},m01:function(){return this.entries[3]},m02:function(){return this.entries[6]},m10:function(){return this.entries[1]},m11:function(){return this.entries[4]},m12:function(){return this.entries[7]},
m20:function(){return this.entries[2]},m21:function(){return this.entries[5]},m22:function(){return this.entries[8]},plus:function(a){return new e(this.m00()+a.m00(),this.m01()+a.m01(),this.m02()+a.m02(),this.m10()+a.m10(),this.m11()+a.m11(),this.m12()+a.m12(),this.m20()+a.m20(),this.m21()+a.m21(),this.m22()+a.m22())},minus:function(a){return new e(this.m00()-a.m00(),this.m01()-a.m01(),this.m02()-a.m02(),this.m10()-a.m10(),this.m11()-a.m11(),this.m12()-a.m12(),this.m20()-a.m20(),this.m21()-a.m21(),
this.m22()-a.m22())},transposed:function(){return new e(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===b.IDENTITY||this.type===b.SCALING?this.type:void 0)},negated:function(){return new e(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())},inverted:function(){var a=this.determinant();if(0!==a)return new e((-this.m12()*this.m21()+this.m11()*this.m22())/a,(this.m02()*this.m21()-
this.m01()*this.m22())/a,(-this.m02()*this.m11()+this.m01()*this.m12())/a,(this.m12()*this.m20()-this.m10()*this.m22())/a,(-this.m02()*this.m20()+this.m00()*this.m22())/a,(this.m02()*this.m10()-this.m00()*this.m12())/a,(-this.m11()*this.m20()+this.m10()*this.m21())/a,(this.m01()*this.m20()-this.m00()*this.m21())/a,(-this.m01()*this.m10()+this.m00()*this.m11())/a,this.type);throw Error("Matrix could not be inverted, determinant === 0");},timesMatrix:function(a){if(this.type===b.IDENTITY||a.type===
b.IDENTITY)return this.type===b.IDENTITY?a:this;if(this.type===a.type){if(this.type===b.TRANSLATION_2D)return new e(1,0,this.m02()+a.m02(),0,1,this.m12()+a.m12(),0,0,1,b.TRANSLATION_2D);if(this.type===b.SCALING)return new e(this.m00()*a.m00(),0,0,0,this.m11()*a.m11(),0,0,0,1,b.SCALING)}return this.type!==b.OTHER&&a.type!==b.OTHER?new e(this.m00()*a.m00()+this.m01()*a.m10(),this.m00()*a.m01()+this.m01()*a.m11(),this.m00()*a.m02()+this.m01()*a.m12()+this.m02(),this.m10()*a.m00()+this.m11()*a.m10(),
this.m10()*a.m01()+this.m11()*a.m11(),this.m10()*a.m02()+this.m11()*a.m12()+this.m12(),0,0,1,b.AFFINE):new e(this.m00()*a.m00()+this.m01()*a.m10()+this.m02()*a.m20(),this.m00()*a.m01()+this.m01()*a.m11()+this.m02()*a.m21(),this.m00()*a.m02()+this.m01()*a.m12()+this.m02()*a.m22(),this.m10()*a.m00()+this.m11()*a.m10()+this.m12()*a.m20(),this.m10()*a.m01()+this.m11()*a.m11()+this.m12()*a.m21(),this.m10()*a.m02()+this.m11()*a.m12()+this.m12()*a.m22(),this.m20()*a.m00()+this.m21()*a.m10()+this.m22()*a.m20(),
this.m20()*a.m01()+this.m21()*a.m11()+this.m22()*a.m21(),this.m20()*a.m02()+this.m21()*a.m12()+this.m22()*a.m22())},timesVector2:function(a){var b=this.m00()*a.x+this.m01()*a.y+this.m02();a=this.m10()*a.x+this.m11()*a.y+this.m12();return new phet.math.Vector2(b,a)},timesVector3:function(a){var b=this.m00()*a.x+this.m01()*a.y+this.m02()*a.z,c=this.m10()*a.x+this.m11()*a.y+this.m12()*a.z;a=this.m20()*a.x+this.m21()*a.y+this.m22()*a.z;return new phet.math.Vector3(b,c,a)},timesTransposeVector2:function(a){var b=
this.m00()*a.x+this.m10()*a.y;a=this.m01()*a.x+this.m11()*a.y;return new phet.math.Vector2(b,a)},timesRelativeVector2:function(a){var b=this.m00()*a.x+this.m10()*a.y;a=this.m01()*a.y+this.m11()*a.y;return new phet.math.Vector2(b,a)},determinant:function(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()},isAffine:function(){return this.type===
b.AFFINE||0===this.m20()&&0===this.m21()&&1===this.m22()},toString:function(){return this.m00()+" "+this.m01()+" "+this.m02()+"\n"+this.m10()+" "+this.m11()+" "+this.m12()+"\n"+this.m20()+" "+this.m21()+" "+this.m22()},toMatrix4:function(){return new phet.math.Matrix4(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)},translation:function(){return new phet.math.Vector2(this.m02(),this.m12())},scaling:function(){return new phet.math.Vector3(this.m00(),
this.m11(),this.m22())},rotation:function(){var a=this.timesVector2(phet.math.Vector2.X_UNIT).minus(this.timesVector2(phet.math.Vector2.ZERO));return Math.atan2(a.y,a.x)},makeImmutable:function(){this.rowMajor=function(){throw Error("Cannot modify immutable matrix");}},toSVGMatrix:function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();a.a=this.m00();a.b=this.m10();a.c=this.m01();a.d=this.m11();a.e=this.m02();a.f=this.m12();return a},canvasSetTransform:function(a){a.setTransform(this.entries[0],
this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])},canvasAppendTransform:function(a){a.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])},cssTransform:function(){return"matrix("+this.entries[0].toFixed(20)+","+this.entries[1].toFixed(20)+","+this.entries[3].toFixed(20)+","+this.entries[4].toFixed(20)+","+this.entries[6].toFixed(20)+","+this.entries[7].toFixed(20)+")"}};e.IDENTITY=new e(1,0,0,0,1,0,0,0,1,b.IDENTITY);
e.IDENTITY.makeImmutable()})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.Float32Array;phet.math.Matrix4=function(a,b,c,d,j,g,k,p,m,q,t,s,u,h,r,l,v){this.entries=new e(16);this.rowMajor(void 0===a?1:a,b||0,c||0,d||0,j||0,void 0===g?1:g,k||0,p||0,m||0,q||0,void 0===t?1:t,s||0,u||0,h||0,r||0,void 0===l?1:l,v)};phet.math.Matrix4.Types={OTHER:0,IDENTITY:1,TRANSLATION_3D:2,SCALING:3};var d=phet.math.Matrix4,b=d.Types;d.identity=function(){return new d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,b.IDENTITY)};d.translation=function(a,f,c){return new d(1,0,0,a,0,1,0,
f,0,0,1,c,0,0,0,1,b.TRANSLATION_3D)};d.translationFromVector=function(a){return d.translation(a.x,a.y,a.z)};d.scaling=function(a,f,c){return new d(a,0,0,0,0,void 0===f?a:f,0,0,0,0,void 0===c?a:c,0,0,0,0,1,b.SCALING)};d.rotationAxisAngle=function(a,f){var c=Math.cos(f),e=Math.sin(f),j=1-c;return new d(a.x*a.x*j+c,a.x*a.y*j-a.z*e,a.x*a.z*j+a.y*e,0,a.y*a.x*j+a.z*e,a.y*a.y*j+c,a.y*a.z*j-a.x*e,0,a.z*a.x*j-a.y*e,a.z*a.y*j+a.x*e,a.z*a.z*j+c,0,0,0,0,1,b.OTHER)};d.rotationX=function(a){var f=Math.cos(a);a=
Math.sin(a);return new d(1,0,0,0,0,f,-a,0,0,a,f,0,0,0,0,1,b.OTHER)};d.rotationY=function(a){var f=Math.cos(a);a=Math.sin(a);return new d(f,0,a,0,0,1,0,0,-a,0,f,0,0,0,0,1,b.OTHER)};d.rotationZ=function(a){var f=Math.cos(a);a=Math.sin(a);return new d(f,-a,0,0,a,f,0,0,0,0,1,0,0,0,0,1,b.OTHER)};d.gluPerspective=function(a,b,c,e){a=Math.cos(a)/Math.sin(a);return new d(a/b,0,0,0,0,a,0,0,0,0,(e+c)/(c-e),2*e*c/(c-e),0,0,-1,0)};d.prototype={constructor:d,rowMajor:function(a,f,c,d,e,g,k,p,m,q,t,s,u,h,r,l,v){this.entries[0]=
a;this.entries[1]=e;this.entries[2]=m;this.entries[3]=u;this.entries[4]=f;this.entries[5]=g;this.entries[6]=q;this.entries[7]=h;this.entries[8]=c;this.entries[9]=k;this.entries[10]=t;this.entries[11]=r;this.entries[12]=d;this.entries[13]=p;this.entries[14]=s;this.entries[15]=l;this.type=void 0===v?b.OTHER:v},columnMajor:function(a,b,c,d,e,g,k,p,m,q,t,s,u,h,r,l,v){this.rowMajor(a,e,m,u,b,g,q,h,c,k,t,r,d,p,s,l,v)},m00:function(){return this.entries[0]},m01:function(){return this.entries[4]},m02:function(){return this.entries[8]},
m03:function(){return this.entries[12]},m10:function(){return this.entries[1]},m11:function(){return this.entries[5]},m12:function(){return this.entries[9]},m13:function(){return this.entries[13]},m20:function(){return this.entries[2]},m21:function(){return this.entries[6]},m22:function(){return this.entries[10]},m23:function(){return this.entries[14]},m30:function(){return this.entries[3]},m31:function(){return this.entries[7]},m32:function(){return this.entries[11]},m33:function(){return this.entries[15]},
plus:function(a){return new d(this.m00()+a.m00(),this.m01()+a.m01(),this.m02()+a.m02(),this.m03()+a.m03(),this.m10()+a.m10(),this.m11()+a.m11(),this.m12()+a.m12(),this.m13()+a.m13(),this.m20()+a.m20(),this.m21()+a.m21(),this.m22()+a.m22(),this.m23()+a.m23(),this.m30()+a.m30(),this.m31()+a.m31(),this.m32()+a.m32(),this.m33()+a.m33())},minus:function(a){return new d(this.m00()-a.m00(),this.m01()-a.m01(),this.m02()-a.m02(),this.m03()-a.m03(),this.m10()-a.m10(),this.m11()-a.m11(),this.m12()-a.m12(),this.m13()-
a.m13(),this.m20()-a.m20(),this.m21()-a.m21(),this.m22()-a.m22(),this.m23()-a.m23(),this.m30()-a.m30(),this.m31()-a.m31(),this.m32()-a.m32(),this.m33()-a.m33())},transposed:function(){return new d(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())},negated:function(){return new d(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),
-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())},inverted:function(){var a=this.determinant();if(0!==a)return new d((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/a,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+
this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/a,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/a,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/a,(this.m30()*this.m22()*this.m13()-
this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/a,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/a,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+
this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/a,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/a,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/a,(this.m30()*this.m21()*this.m03()-
this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/a,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/a,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+
this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/a,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/a,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/a,(this.m30()*this.m11()*this.m02()-
this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/a,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/a);throw Error("Matrix could not be inverted, determinant === 0");},timesMatrix:function(a){var f=b.OTHER;this.type===b.TRANSLATION_3D&&
a.type===b.TRANSLATION_3D&&(f=b.TRANSLATION_3D);this.type===b.SCALING&&a.type===b.SCALING&&(f=b.SCALING);this.type===b.IDENTITY&&(f=a.type);a.type===b.IDENTITY&&(f=this.type);return new d(this.m00()*a.m00()+this.m01()*a.m10()+this.m02()*a.m20()+this.m03()*a.m30(),this.m00()*a.m01()+this.m01()*a.m11()+this.m02()*a.m21()+this.m03()*a.m31(),this.m00()*a.m02()+this.m01()*a.m12()+this.m02()*a.m22()+this.m03()*a.m32(),this.m00()*a.m03()+this.m01()*a.m13()+this.m02()*a.m23()+this.m03()*a.m33(),this.m10()*
a.m00()+this.m11()*a.m10()+this.m12()*a.m20()+this.m13()*a.m30(),this.m10()*a.m01()+this.m11()*a.m11()+this.m12()*a.m21()+this.m13()*a.m31(),this.m10()*a.m02()+this.m11()*a.m12()+this.m12()*a.m22()+this.m13()*a.m32(),this.m10()*a.m03()+this.m11()*a.m13()+this.m12()*a.m23()+this.m13()*a.m33(),this.m20()*a.m00()+this.m21()*a.m10()+this.m22()*a.m20()+this.m23()*a.m30(),this.m20()*a.m01()+this.m21()*a.m11()+this.m22()*a.m21()+this.m23()*a.m31(),this.m20()*a.m02()+this.m21()*a.m12()+this.m22()*a.m22()+
this.m23()*a.m32(),this.m20()*a.m03()+this.m21()*a.m13()+this.m22()*a.m23()+this.m23()*a.m33(),this.m30()*a.m00()+this.m31()*a.m10()+this.m32()*a.m20()+this.m33()*a.m30(),this.m30()*a.m01()+this.m31()*a.m11()+this.m32()*a.m21()+this.m33()*a.m31(),this.m30()*a.m02()+this.m31()*a.m12()+this.m32()*a.m22()+this.m33()*a.m32(),this.m30()*a.m03()+this.m31()*a.m13()+this.m32()*a.m23()+this.m33()*a.m33(),f)},timesVector4:function(a){var b=this.m00()*a.x+this.m01()*a.y+this.m02()*a.z+this.m03()*a.w,c=this.m10()*
a.x+this.m11()*a.y+this.m12()*a.z+this.m13()*a.w,d=this.m20()*a.x+this.m21()*a.y+this.m22()*a.z+this.m23()*a.w;a=this.m30()*a.x+this.m31()*a.y+this.m32()*a.z+this.m33()*a.w;return new phet.math.Vector4(b,c,d,a)},timesVector3:function(a){return this.timesVector4(a.toVector4()).toVector3()},timesTransposeVector4:function(a){var b=this.m00()*a.x+this.m10()*a.y+this.m20()*a.z+this.m30()*a.w,c=this.m01()*a.x+this.m11()*a.y+this.m21()*a.z+this.m31()*a.w,d=this.m02()*a.x+this.m12()*a.y+this.m22()*a.z+this.m32()*
a.w;a=this.m03()*a.x+this.m13()*a.y+this.m23()*a.z+this.m33()*a.w;return new phet.math.Vector4(b,c,d,a)},timesTransposeVector3:function(a){return this.timesTransposeVector4(a.toVector4()).toVector3()},timesRelativeVector3:function(a){var b=this.m00()*a.x+this.m10()*a.y+this.m20()*a.z,c=this.m01()*a.y+this.m11()*a.y+this.m21()*a.z;a=this.m02()*a.z+this.m12()*a.y+this.m22()*a.z;return new phet.math.Vector3(b,c,a)},determinant:function(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*
this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*
this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()},toString:function(){return this.m00()+
" "+this.m01()+" "+this.m02()+" "+this.m03()+"\n"+this.m10()+" "+this.m11()+" "+this.m12()+" "+this.m13()+"\n"+this.m20()+" "+this.m21()+" "+this.m22()+" "+this.m23()+"\n"+this.m30()+" "+this.m31()+" "+this.m32()+" "+this.m33()},translation:function(){return new phet.math.Vector3(this.m03(),this.m13(),this.m23())},scaling:function(){return new phet.math.Vector3(this.m00(),this.m11(),this.m22())},makeImmutable:function(){this.rowMajor=function(){throw Error("Cannot modify immutable matrix");}}};d.IDENTITY=
new d;d.IDENTITY.makeImmutable()})();phet=phet||{};phet.math=phet.math||{};(function(){phet.math.Ray2=function(d,b){this.pos=d;this.dir=b;phet.debugAssert(function(){return 0.01>Math.abs(b.magnitude()-1)})};var e=phet.math.Ray2;e.prototype={constructor:e,shifted:function(d){return new e(this.pointAtDistance(d),this.dir)},pointAtDistance:function(d){return this.pos.plus(this.dir.timesScalar(d))},toString:function(){return this.pos.toString()+" => "+this.dir.toString()}}})();phet=phet||{};
phet.math=phet.math||{};(function(){phet.math.Ray3=function(d,b){this.pos=d;this.dir=b};var e=phet.math.Ray3;e.prototype={constructor:e,shifted:function(d){return new e(this.pointAtDistance(d),this.dir)},pointAtDistance:function(d){return this.pos.plus(this.dir.timesScalar(d))},toString:function(){return this.pos.toString()+" => "+this.dir.toString()}}})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.math.Matrix3,d=phet.math.Vector2;phet.math.Transform3=function(a){this.set(void 0===a?e.IDENTITY:a)};var b=phet.math.Transform3;b.prototype={constructor:b,set:function(a){this.matrix=a;this.inverseTransposed=this.matrixTransposed=this.inverse=null},prepend:function(a){this.set(a.timesMatrix(this.matrix))},append:function(a){this.set(this.matrix.timesMatrix(a))},prependTransform:function(a){this.prepend(a.matrix)},appendTransform:function(a){this.append(a.matrix)},applyToCanvasContext:function(a){a.setTransform(this.matrix.m00(),
this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())},getMatrix:function(){return this.matrix},getInverse:function(){null===this.inverse&&(this.inverse=this.matrix.inverted());return this.inverse},getMatrixTransposed:function(){null===this.matrixTransposed&&(this.matrixTransposed=this.matrix.transposed());return this.matrixTransposed},getInverseTransposed:function(){null===this.inverseTransposed&&(this.inverseTransposed=this.getInverse().transposed());return this.inverseTransposed},
isIdentity:function(){return this.matrix.type===e.Types.IDENTITY},transformPosition2:function(a){return this.matrix.timesVector2(a)},transformDelta2:function(a){return this.matrix.timesRelativeVector2(a)},transformNormal2:function(a){return this.getInverse().timesTransposeVector2(a)},transformDeltaX:function(a){return this.transformDelta2(new d(a,0)).x},transformDeltaY:function(a){return this.transformDelta2(new d(0,a)).y},transformBounds2:function(a){return a.transformed(this.matrix)},transformShape:function(a){return a.transformed(this.matrix)},
inversePosition2:function(a){return this.getInverse().timesVector2(a)},inverseDelta2:function(a){return this.inversePosition2(a).minus(this.inversePosition2(d.ZERO))},inverseNormal2:function(a){return this.matrix.timesTransposeVector2(a)},inverseDeltaX:function(a){return this.inverseDelta2(new d(a,0)).x},inverseDeltaY:function(a){return this.inverseDelta2(new d(0,a)).y},inverseBounds2:function(a){return a.transformed(this.getInverse())},inverseShape:function(a){return a.transformed(this.getInverse())}}})();
phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.math.Matrix4,d=phet.math.Vector3;phet.math.Transform4=function(a){this.set(void 0===a?e.IDENTITY:a)};var b=phet.math.Transform4;b.prototype={constructor:b,set:function(a){this.matrix=a;this.inverseTransposed=this.matrixTransposed=this.inverse=null},getMatrix:function(){return this.matrix},getInverse:function(){null===this.inverse&&(this.inverse=this.matrix.inverted());return this.inverse},getMatrixTransposed:function(){null===this.matrixTransposed&&(this.matrixTransposed=this.matrix.transposed());
return this.matrixTransposed},getInverseTransposed:function(){null===this.inverseTransposed&&(this.inverseTransposed=this.getInverse().transposed());return this.inverseTransposed},prepend:function(a){this.set(a.timesMatrix(this.matrix))},append:function(a){this.set(this.matrix.timesMatrix(a))},prependTransform:function(a){this.prepend(a.matrix)},appendTransform:function(a){this.append(a.matrix)},isIdentity:function(){return this.matrix.type===e.Types.IDENTITY},applyToCanvasContext:function(a){a.setTransform(this.matrix.m00(),
this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m03(),this.matrix.m13())},transformPosition3:function(a){return this.matrix.timesVector3(a)},transformDelta3:function(a){return this.matrix.timesRelativeVector3(a)},transformNormal3:function(a){return this.getInverse().timesTransposeVector3(a)},transformDeltaX:function(a){return this.transformDelta3(new d(a,0,0)).x},transformDeltaY:function(a){return this.transformDelta3(new d(0,a,0)).y},transformDeltaZ:function(a){return this.transformDelta3(new d(0,
0,a)).z},transformRay:function(a){return new phet.math.Ray3(this.transformPosition3(a.pos),this.transformPosition3(a.pos.plus(a.dir)).minus(this.transformPosition3(a.pos)))},inversePosition3:function(a){return this.getInverse().timesVector3(a)},inverseDelta3:function(a){return this.inversePosition3(a).minus(this.inversePosition3(d.ZERO))},inverseNormal3:function(a){return this.matrix.timesTransposeVector3(a)},inverseDeltaX:function(a){return this.inverseDelta3(new d(a,0,0)).x},inverseDeltaY:function(a){return this.inverseDelta3(new d(0,
a,0)).y},inverseDeltaZ:function(a){return this.inverseDelta3(new d(0,0,a)).z},inverseRay:function(a){return new phet.math.Ray3(this.inversePosition3(a.pos),this.inversePosition3(a.pos.plus(a.dir)).minus(this.inversePosition3(a.pos)))}}})();phet=phet||{};phet.math=phet.math||{};
(function(){function e(b,a,f){if(0===b.length)f.call(void 0,a);else for(var c=0;c<b.length;c++){var d=b[c],j=b.slice(0);j.splice(c,1);var g=a.slice(0);g.push(d);e(j,g,f)}}phet.math.Permutation=function(b){this.indices=b};var d=phet.math.Permutation;d.identity=function(b){phet.assert(0<=b);for(var a=Array(b),f=0;f<b;f++)a[f]=f;return new d(a)};d.permutations=function(b){var a=[];d.forEachPermutation(phet.util.rangeInclusive(0,b-1),function(b){a.push(new d(b))});return a};d.forEachPermutation=function(b,
a){e(b,[],a)};phet.math.Permutation.prototype={constructor:d,size:function(){return this.indices.length},apply:function(b){if(phet.util.isArray(b)){if(b.length!==this.size())throw Error("Permutation length "+this.size()+" not equal to list length "+b.length);for(var a=Array(b.length),f=0;f<b.length;f++)a[f]=b[this.indices[f]];return a}return this.indices[b]},inverted:function(){for(var b=Array(this.size()),a=0;a<this.size();a++)b[this.indices[a]]=a;return new d(b)},withIndicesPermuted:function(b){var a=
[],f=this;d.forEachPermutation(b,function(c){for(var e=f.indices,j=e.slice(0),g=0;g<b.length;g++)j[b[g]]=e[c[g]];a.push(new d(j))});return a},toString:function(){return"P["+phet.util.mkString(this.indices,", ")+"]"}};d.testMe=function(b){var a=new d([1,4,3,2,0]);b.log(a.toString());a=a.inverted();b.log(a.toString());b.log(a.withIndicesPermuted([0,3,4]).toString());b.log(d.permutations(4).toString())}})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.Float32Array;phet.math.Matrix=function(b,a,f,c){this.m=b;this.n=a;this.size=b*=a;if(c)this.entries=f;else if(f||(f=0),this.entries=new e(b),phet.util.isArray(f)){phet.assert(f.length===b);for(c=0;c<b;c++)this.entries[c]=f[c]}else for(c=0;c<b;c++)this.entries[c]=f};var d=phet.math.Matrix;d.hypot=function(b,a){var f;Math.abs(b)>Math.abs(a)?(f=a/b,f=Math.abs(b)*Math.sqrt(1+f*f)):0!==a?(f=b/a,f=Math.abs(a)*Math.sqrt(1+f*f)):f=0;return f};d.prototype={constructor:d,copy:function(){for(var b=
new d(this.m,this.n),a=0;a<this.size;a++)b.entries[a]=this.entries[a];return b},getArray:function(){return this.entries},getArrayCopy:function(){return new e(this.entries)},getRowDimension:function(){return this.m},getColumnDimension:function(){return this.n},index:function(b,a){return b*this.n+a},get:function(b,a){return this.entries[this.index(b,a)]},set:function(b,a,f){this.entries[this.index(b,a)]=f},getMatrix:function(b,a,f,c){for(var e=new d(a-b+1,c-f+1),j=b;j<=a;j++)for(var g=f;g<=c;g++)e.entries[e.index(j-
b,g-f)]=this.entries[this.index(j,g)];return e},getArrayRowMatrix:function(b,a,f){for(var c=new d(b.length,f-a+1),e=0;e<b.length;e++)for(var j=a;j<=f;j++)c.entries[c.index(e,j-a)]=this.entries[this.index(b[e],j)];return c},transpose:function(){for(var b=new d(this.n,this.m),a=0;a<this.m;a++)for(var f=0;f<this.n;f++)b.entries[b.index(f,a)]=this.entries[this.index(a,f)];return b},norm1:function(){for(var b=0,a=0;a<this.n;a++){for(var f=0,c=0;c<this.m;c++)f+=Math.abs(this.entries[this.index(c,a)]);b=
Math.max(b,f)}return b},norm2:function(){return(new phet.math.SingularValueDecomposition(this)).norm2()},normInf:function(){for(var b=0,a=0;a<this.m;a++){for(var f=0,c=0;c<this.n;c++)f+=Math.abs(this.entries[this.index(a,c)]);b=Math.max(b,f)}return b},normF:function(){for(var b=0,a=0;a<this.m;a++)for(var f=0;f<this.n;f++)b=d.hypot(b,this.entries[this.index(a,f)]);return b},uminus:function(){for(var b=new d(this.m,this.n),a=0;a<this.m;a++)for(var f=0;f<this.n;f++)b.entries[b.index(a,f)]=-this.entries[this.index(a,
f)];return b},plus:function(b){this.checkMatrixDimensions(b);for(var a=new d(this.m,this.n),f=0;f<this.m;f++)for(var c=0;c<this.n;c++){var e=a.index(f,c);a.entries[e]=this.entries[e]+b.entries[e]}return a},plusEquals:function(b){this.checkMatrixDimensions(b);for(var a=new d(this.m,this.n),f=0;f<this.m;f++)for(var c=0;c<this.n;c++){var e=a.index(f,c);this.entries[e]+=b.entries[e]}return this},minus:function(b){this.checkMatrixDimensions(b);for(var a=new d(this.m,this.n),f=0;f<this.m;f++)for(var c=
0;c<this.n;c++){var e=this.index(f,c);a.entries[e]=this.entries[e]-b.entries[e]}return a},minusEquals:function(b){this.checkMatrixDimensions(b);for(var a=0;a<this.m;a++)for(var f=0;f<this.n;f++){var c=this.index(a,f);this.entries[c]-=b.entries[c]}return this},arrayTimes:function(b){this.checkMatrixDimensions(b);for(var a=new d(this.m,this.n),f=0;f<this.m;f++)for(var c=0;c<this.n;c++){var e=a.index(f,c);a.entries[e]=this.entries[e]*b.entries[e]}return a},arrayTimesEquals:function(b){this.checkMatrixDimensions(b);
for(var a=0;a<this.m;a++)for(var f=0;f<this.n;f++){var c=this.index(a,f);this.entries[c]*=b.entries[c]}return this},arrayRightDivide:function(b){this.checkMatrixDimensions(b);for(var a=new d(this.m,this.n),f=0;f<this.m;f++)for(var c=0;c<this.n;c++){var e=this.index(f,c);a.entries[e]=this.entries[e]/b.entries[e]}return a},arrayRightDivideEquals:function(b){this.checkMatrixDimensions(b);for(var a=0;a<this.m;a++)for(var f=0;f<this.n;f++){var c=this.index(a,f);this.entries[c]/=b.entries[c]}return this},
arrayLeftDivide:function(b){this.checkMatrixDimensions(b);for(var a=new d(this.m,this.n),f=0;f<this.m;f++)for(var c=0;c<this.n;c++){var e=this.index(f,c);a.entries[e]=b.entries[e]/this.entries[e]}return a},arrayLeftDivideEquals:function(b){this.checkMatrixDimensions(b);for(var a=0;a<this.m;a++)for(var f=0;f<this.n;f++){var c=this.index(a,f);this.entries[c]=b.entries[c]/this.entries[c]}return this},times:function(b){var a,f,c,n,j;if(b.isMatrix){if(b.m!==this.n)throw Error("Matrix inner dimensions must agree.");
a=new d(this.m,b.n);var g=new e(this.n);for(c=0;c<b.n;c++){for(n=0;n<this.n;n++)g[n]=b.entries[b.index(n,c)];for(f=0;f<this.m;f++){for(n=j=0;n<this.n;n++)j+=this.entries[this.index(f,n)]*g[n];a.entries[a.index(f,c)]=j}}}else{j=b;a=new d(this.m,this.n);for(f=0;f<this.m;f++)for(c=0;c<this.n;c++)a.entries[a.index(f,c)]=j*this.entries[this.index(f,c)]}return a},timesEquals:function(b){for(var a=0;a<this.m;a++)for(var f=0;f<this.n;f++){var c=this.index(a,f);this.entries[c]*=b}return this},solve:function(b){return this.m===
this.n?(new phet.math.LUDecomposition(this)).solve(b):(new phet.math.QRDecomposition(this)).solve(b)},solveTranspose:function(b){return this.transpose().solve(b.transpose())},inverse:function(){return this.solve(d.identity(this.m,this.m))},det:function(){return(new phet.math.LUDecomposition(this)).det()},rank:function(){return(new phet.math.SingularValueDecomposition(this)).rank()},cond:function(){return(new phet.math.SingularValueDecomposition(this)).cond()},trace:function(){for(var b=0,a=0;a<Math.min(this.m,
this.n);a++)b+=this.entries[this.index(a,a)];return b},checkMatrixDimensions:function(b){if(b.m!==this.m||b.n!==this.n)throw Error("Matrix dimensions must agree.");},toString:function(){var b;b=""+("dim: "+this.getRowDimension()+"x"+this.getColumnDimension()+"\n");for(var a=0;a<this.getRowDimension();a++){for(var f=0;f<this.getColumnDimension();f++)b+=this.get(a,f)+" ";b+="\n"}return b},extractVector2:function(b){phet.assert(2===this.m);return new phet.math.Vector2(this.get(0,b),this.get(1,b))},extractVector3:function(b){phet.assert(3===
this.m);return new phet.math.Vector3(this.get(0,b),this.get(1,b),this.get(2,b))},extractVector4:function(b){phet.assert(4===this.m);return new phet.math.Vector4(this.get(0,b),this.get(1,b),this.get(2,b),this.get(3,b))},isMatrix:!0};d.identity=function(b,a){for(var f=new d(b,a),c=0;c<b;c++)for(var e=0;e<a;e++)f.entries[f.index(c,e)]=c===e?1:0;return f};d.rowVector2=function(b){return new d(1,2,[b.x,b.y])};d.rowVector3=function(b){return new d(1,3,[b.x,b.y,b.z])};d.rowVector4=function(b){return new d(1,
4,[b.x,b.y,b.z,b.w])};d.rowVector=function(b){if(b.isVector2)return d.rowVector2(b);if(b.isVector3)return d.rowVector3(b);if(b.isVector4)return d.rowVector4(b);throw Error("undetected type of vector: "+b.toString());};d.columnVector2=function(b){return new d(2,1,[b.x,b.y])};d.columnVector3=function(b){return new d(3,1,[b.x,b.y,b.z])};d.columnVector4=function(b){return new d(4,1,[b.x,b.y,b.z,b.w])};d.columnVector=function(b){if(b.isVector2)return d.columnVector2(b);if(b.isVector3)return d.columnVector3(b);
if(b.isVector4)return d.columnVector4(b);throw Error("undetected type of vector: "+b.toString());};d.fromVectors2=function(b){for(var a=b.length,f=new e(2*a),c=0;c<a;c++){var n=b[c];f[c]=n.x;f[c+a]=n.y}return new d(2,a,f,!0)};d.fromVectors3=function(b){for(var a=b.length,f=new e(3*a),c=0;c<a;c++){var n=b[c];f[c]=n.x;f[c+a]=n.y;f[c+2*a]=n.z}return new d(3,a,f,!0)};d.fromVectors4=function(b){for(var a=b.length,f=new e(4*a),c=0;c<a;c++){var n=b[c];f[c]=n.x;f[c+a]=n.y;f[c+2*a]=n.z;f[c+3*a]=n.w}return new d(4,
a,f,!0)}})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.math.Matrix,d=phet.Float32Array;phet.math.LUDecomposition=function(a){var b,c,e;this.matrix=a;var j=this.LU=a.getArrayCopy(),g=this.m=a.getRowDimension(),k=this.n=a.getColumnDimension();this.piv=new Uint32Array(g);for(b=0;b<g;b++)this.piv[b]=b;this.pivsign=1;var p=new d(g);for(c=0;c<k;c++){for(b=0;b<g;b++)p[b]=j[a.index(b,c)];for(b=0;b<g;b++){var m=Math.min(b,c),q=0;for(e=0;e<m;e++)var t=a.index(b,e),q=q+j[t]*p[e];p[b]-=q;j[a.index(b,c)]=p[b]}m=c;for(b=c+1;b<g;b++)Math.abs(p[b])>
Math.abs(p[m])&&(m=b);if(m!==c){for(e=0;e<k;e++)b=a.index(m,e),q=a.index(c,e),t=j[b],j[b]=j[q],j[q]=t;e=this.piv[m];this.piv[m]=this.piv[c];this.piv[c]=e;this.pivsign=-this.pivsign}if(c<g&&0!==j[this.matrix.index(c,c)])for(b=c+1;b<g;b++)j[a.index(b,c)]/=j[a.index(c,c)]}};var b=phet.math.LUDecomposition;b.prototype={constructor:b,isNonsingular:function(){for(var a=0;a<this.n;a++){var b=this.matrix.index(a,a);if(0===this.LU[b])return!1}return!0},getL:function(){for(var a=new e(this.m,this.n),b=0;b<
this.m;b++)for(var c=0;c<this.n;c++)b>c?a.entries[a.index(b,c)]=this.LU[this.matrix.index(b,c)]:b===c?a.entries[a.index(b,c)]=1:a.entries[a.index(b,c)]=0;return a},getU:function(){for(var a=new e(this.n,this.n),b=0;b<this.n;b++)for(var c=0;c<this.n;c++)b<=c?a.entries[a.index(b,c)]=this.LU[this.matrix.index(b,c)]:a.entries[a.index(b,c)]=0;return a},getPivot:function(){for(var a=new Uint32Array(this.m),b=0;b<this.m;b++)a[b]=this.piv[b];return a},getDoublePivot:function(){for(var a=new d(this.m),b=0;b<
this.m;b++)a[b]=this.piv[b];return a},det:function(){if(this.m!==this.n)throw Error("Matrix must be square.");for(var a=this.pivsign,b=0;b<this.n;b++)a*=this.LU[this.matrix.index(b,b)];return a},solve:function(a){var b,c;if(a.getRowDimension()!==this.m)throw Error("Matrix row dimensions must agree.");if(!this.isNonsingular())throw Error("Matrix is singular.");var e=a.getColumnDimension(),d=a.getArrayRowMatrix(this.piv,0,e-1);for(c=0;c<this.n;c++)for(a=c+1;a<this.n;a++)for(b=0;b<e;b++)d.entries[d.index(a,
b)]-=d.entries[d.index(c,b)]*this.LU[this.matrix.index(a,c)];for(c=this.n-1;0<=c;c--){for(b=0;b<e;b++)d.entries[d.index(c,b)]/=this.LU[this.matrix.index(c,c)];for(a=0;a<c;a++)for(b=0;b<e;b++)d.entries[d.index(a,b)]-=d.entries[d.index(c,b)]*this.LU[this.matrix.index(a,c)]}return d}}})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.math.Matrix,d=phet.Float32Array;phet.math.QRDecomposition=function(a){this.matrix=a;var b=this.QR=a.getArrayCopy(),c=this.m=a.getRowDimension();a=this.n=a.getColumnDimension();this.Rdiag=new d(a);var n,j,g;for(g=0;g<a;g++){var k=0;for(n=g;n<c;n++)k=e.hypot(k,b[this.matrix.index(n,g)]);if(0!==k){0>b[this.matrix.index(g,g)]&&(k=-k);for(n=g;n<c;n++)b[this.matrix.index(n,g)]/=k;b[this.matrix.index(g,g)]+=1;for(j=g+1;j<a;j++){var p=0;for(n=g;n<c;n++)p+=b[this.matrix.index(n,g)]*
b[this.matrix.index(n,j)];p=-p/b[this.matrix.index(g,g)];for(n=g;n<c;n++)b[this.matrix.index(n,j)]+=p*b[this.matrix.index(n,g)]}}this.Rdiag[g]=-k}};var b=phet.math.QRDecomposition;b.prototype={constructor:b,isFullRank:function(){for(var a=0;a<this.n;a++)if(0===this.Rdiag[a])return!1;return!0},getH:function(){for(var a=new e(this.m,this.n),b=0;b<this.m;b++)for(var c=0;c<this.n;c++)b>=c?a.entries[a.index(b,c)]=this.QR[this.matrix.index(b,c)]:a.entries[a.index(b,c)]=0;return a},getR:function(){for(var a=
new e(this.n,this.n),b=0;b<this.n;b++)for(var c=0;c<this.n;c++)b<c?a.entries[a.index(b,c)]=this.QR[this.matrix.index(b,c)]:b===c?a.entries[a.index(b,c)]=this.Rdiag[b]:a.entries[a.index(b,c)]=0;return a},getQ:function(){var a,b,c,d=new e(this.m,this.n);for(c=this.n-1;0<=c;c--){for(a=0;a<this.m;a++)d.entries[d.index(a,c)]=0;d.entries[d.index(c,c)]=1;for(b=c;b<this.n;b++)if(0!==this.QR[this.matrix.index(c,c)]){var j=0;for(a=c;a<this.m;a++)j+=this.QR[this.matrix.index(a,c)]*d.entries[d.index(a,b)];j=
-j/this.QR[this.matrix.index(c,c)];for(a=c;a<this.m;a++)d.entries[d.index(a,b)]+=j*this.QR[this.matrix.index(a,c)]}}return d},solve:function(a){if(a.getRowDimension()!==this.m)throw Error("Matrix row dimensions must agree.");if(!this.isFullRank())throw Error("Matrix is rank deficient.");var b,c,d,j=a.getColumnDimension(),g=a.getArrayCopy();for(d=0;d<this.n;d++)for(c=0;c<j;c++){var k=0;for(b=d;b<this.m;b++)k+=this.QR[this.matrix.index(b,d)]*g[a.index(b,c)];k=-k/this.QR[this.matrix.index(d,d)];for(b=
d;b<this.m;b++)g[a.index(b,c)]+=k*this.QR[this.matrix.index(b,d)]}for(d=this.n-1;0<=d;d--){for(c=0;c<j;c++)g[a.index(d,c)]/=this.Rdiag[d];for(b=0;b<d;b++)for(c=0;c<j;c++)g[a.index(b,c)]-=g[a.index(d,c)]*this.QR[this.matrix.index(b,d)]}return(new e(g,this.n,j)).getMatrix(0,this.n-1,0,j-1)}}})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.math.Matrix,d=phet.Float32Array;phet.math.SingularValueDecomposition=function(a){this.matrix=a;var b=a.getArrayCopy();this.m=a.getRowDimension();this.n=a.getColumnDimension();a=this.m;var c=this.n,n=Math.min,j=Math.max,g=Math.pow,k=Math.abs,p=n(a,c),m=this.s=new d(n(a+1,c)),q=this.U=new d(a*p),t=this.V=new d(c*c),s=new d(c),u=new d(a),h,r,l,v,w,x,z=e.hypot,y=n(a-1,c);w=j(0,n(c-2,a));for(l=0;l<j(y,w);l++){if(l<y){m[l]=0;for(h=l;h<a;h++)m[l]=z(m[l],b[h*c+l]);if(0!==m[l]){0>b[l*
c+l]&&(m[l]=-m[l]);for(h=l;h<a;h++)b[h*c+l]/=m[l];b[l*c+l]+=1}m[l]=-m[l]}for(r=l+1;r<c;r++){if(l<y&&0!==m[l]){v=0;for(h=l;h<a;h++)v+=b[h*c+l]*b[h*c+r];v=-v/b[l*c+l];for(h=l;h<a;h++)b[h*c+r]+=v*b[h*c+l]}s[r]=b[l*c+r]}if(l<y)for(h=l;h<a;h++)q[h*p+l]=b[h*c+l];if(l<w){s[l]=0;for(h=l+1;h<c;h++)s[l]=z(s[l],s[h]);if(0!==s[l]){0>s[l+1]&&(s[l]=-s[l]);for(h=l+1;h<c;h++)s[h]/=s[l];s[l+1]+=1}s[l]=-s[l];if(l+1<a&&0!==s[l]){for(h=l+1;h<a;h++)u[h]=0;for(r=l+1;r<c;r++)for(h=l+1;h<a;h++)u[h]+=s[r]*b[h*c+r];for(r=
l+1;r<c;r++){v=-s[r]/s[l+1];for(h=l+1;h<a;h++)b[h*c+r]+=v*u[h]}}for(h=l+1;h<c;h++)t[h*c+l]=s[h]}}n=n(c,a+1);y<c&&(m[y]=b[y*c+y]);a<n&&(m[n-1]=0);w+1<n&&(s[w]=b[w*c+n-1]);s[n-1]=0;for(r=y;r<p;r++){for(h=0;h<a;h++)q[h*p+r]=0;q[r*p+r]=1}for(l=y-1;0<=l;l--)if(0!==m[l]){for(r=l+1;r<p;r++){v=0;for(h=l;h<a;h++)v+=q[h*p+l]*q[h*p+r];v=-v/q[l*p+l];for(h=l;h<a;h++)q[h*p+r]+=v*q[h*p+l]}for(h=l;h<a;h++)q[h*p+l]=-q[h*p+l];q[l*p+l]=1+q[l*p+l];for(h=0;h<l-1;h++)q[h*p+l]=0}else{for(h=0;h<a;h++)q[h*p+l]=0;q[l*p+l]=
1}for(l=c-1;0<=l;l--){if(l<w&&0!==s[l])for(r=l+1;r<p;r++){v=0;for(h=l+1;h<c;h++)v+=t[h*c+l]*t[h*c+r];v=-v/t[l+1*c+l];for(h=l+1;h<c;h++)t[h*c+r]+=v*t[h*c+l]}for(h=0;h<c;h++)t[h*c+l]=0;t[l*c+l]=1}b=n-1;y=g(2,-52);for(g=g(2,-966);0<n;){for(l=n-2;-1<=l&&-1!==l;l--)if(k(s[l])<=g+y*(k(m[l])+k(m[l+1]))){s[l]=0;break}if(l===n-2)v=4;else{for(h=n-1;h>=l&&h!==l;h--)if(v=(h!==n?k(s[h]):0)+(h!==l+1?k(s[h-1]):0),k(m[h])<=g+y*v){m[h]=0;break}h===l?v=3:h===n-1?v=1:(v=2,l=h)}l++;switch(v){case 1:w=s[n-2];s[n-2]=0;
for(r=n-2;r>=l;r--){v=z(m[r],w);u=m[r]/v;x=w/v;m[r]=v;r!==l&&(w=-x*s[r-1],s[r-1]*=u);for(h=0;h<c;h++)v=u*t[h*c+r]+x*t[h*c+n-1],t[h*c+n-1]=-x*t[h*c+r]+u*t[h*c+n-1],t[h*c+r]=v}break;case 2:w=s[l-1];s[l-1]=0;for(r=l;r<n;r++){v=z(m[r],w);u=m[r]/v;x=w/v;m[r]=v;w=-x*s[r];s[r]*=u;for(h=0;h<a;h++)v=u*q[h*p+r]+x*q[h*p+l-1],q[h*p+l-1]=-x*q[h*p+r]+u*q[h*p+l-1],q[h*p+r]=v}break;case 3:r=j(j(j(j(k(m[n-1]),k(m[n-2])),k(s[n-2])),k(m[l])),k(s[l]));h=m[n-1]/r;u=m[n-2]/r;w=s[n-2]/r;v=m[l]/r;r=s[l]/r;u=((u+h)*(u-h)+
w*w)/2;w=h*w*h*w;x=0;if(0!==u||0!==w)x=Math.sqrt(u*u+w),0>u&&(x=-x),x=w/(u+x);w=(v+h)*(v-h)+x;var A=v*r;for(r=l;r<n-1;r++){v=z(w,A);u=w/v;x=A/v;r!==l&&(s[r-1]=v);w=u*m[r]+x*s[r];s[r]=u*s[r]-x*m[r];A=x*m[r+1];m[r+1]*=u;for(h=0;h<c;h++)v=u*t[h*c+r]+x*t[h*c+r+1],t[h*c+r+1]=-x*t[h*c+r]+u*t[h*c+r+1],t[h*c+r]=v;v=z(w,A);u=w/v;x=A/v;m[r]=v;w=u*s[r]+x*m[r+1];m[r+1]=-x*s[r]+u*m[r+1];A=x*s[r+1];s[r+1]*=u;if(r<a-1)for(h=0;h<a;h++)v=u*q[h*p+r]+x*q[h*p+r+1],q[h*p+r+1]=-x*q[h*p+r]+u*q[h*p+r+1],q[h*p+r]=v}s[n-2]=
w;break;case 4:if(0>=m[l]){m[l]=0>m[l]?-m[l]:0;for(h=0;h<=b;h++)t[h*c+l]=-t[h*c+l]}for(;l<b&&!(m[l]>=m[l+1]);){v=m[l];m[l]=m[l+1];m[l+1]=v;if(l<c-1)for(h=0;h<c;h++)v=t[h*c+l+1],t[h*c+l+1]=t[h*c+l],t[h*c+l]=v;if(l<a-1)for(h=0;h<a;h++)v=q[h*p+l+1],q[h*p+l+1]=q[h*p+l],q[h*p+l]=v;l++}n--}}};var b=phet.math.SingularValueDecomposition;b.prototype={constructor:b,getU:function(){return new e(this.m,Math.min(this.m+1,this.n),this.U,!0)},getV:function(){return new e(this.n,this.n,this.V,!0)},getSingularValues:function(){return this.s},
getS:function(){for(var a=new e(this.n,this.n),b=0;b<this.n;b++){for(var c=0;c<this.n;c++)a.entries[a.index(b,c)]=0;a.entries[a.index(b,b)]=this.s[b]}return a},norm2:function(){return this.s[0]},cond:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},rank:function(){for(var a=Math.pow(2,-23),a=Math.max(this.m,this.n)*this.s[0]*a,b=0,c=0;c<this.s.length;c++)this.s[c]>a&&b++;return b}}})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.math.Matrix4;phet.math.StageCenteringCanvasTransform=function(b,a){this.canvasSizeProperty=b;this.stageSize=a;this.transform=new phet.model.Property(null);var f=this;b.addObserver(function(){f.updateTransform()},!0)};var d=phet.math.StageCenteringCanvasTransform;d.fieldOfViewYFactor=function(b,a){var f=b.width/a.width,c=b.height/a.height;return 0===f||0===c?1:c>f?c/f:1};d.compute=function(b,a){var f=b.width/a.width,c=b.height/a.height,f=f<c?f:c,f=0>=f?1:f;return e.translation(b.width/
2-f*a.width/2,b.height/2-f*a.height/2).timesMatrix(e.scaling(f))};d.prototype={constructor:d,fieldOfViewYFactor:function(){return d.fieldOfViewYFactor(this.canvasSizeProperty.get(),this.stageSize)},updateTransform:function(){var b=d.compute(this.canvasSizeProperty.get(),this.stageSize);this.transform.set(new phet.math.Transform4(b))}}})();phet=phet||{};phet.math=phet.math||{};
(function(){phet.math.Dimension2=function(d,b){this.width=d;this.height=b};var e=phet.math.Dimension2;e.prototype={constructor:e,toString:function(){return"["+this.width+"w, "+this.height+"h]"},equals:function(d){return this.width===d.width&&this.height===d.height}}})();phet=phet||{};phet.math=phet.math||{};
(function(){var e=phet.math.Vector2;phet.math.Bounds2=function(b,a,f,c){this.minX=b;this.minY=a;this.maxX=f;this.maxY=c};var d=phet.math.Bounds2;d.prototype={constructor:d,width:function(){return this.maxX-this.minX},height:function(){return this.maxY-this.minY},x:function(){return this.minX},y:function(){return this.minY},centerX:function(){return(this.maxX+this.minX)/2},centerY:function(){return(this.maxY+this.minY)/2},isEmpty:function(){return 0>=this.width()||0>=this.height()},union:function(b){return new d(Math.min(this.minX,
b.minX),Math.min(this.minY,b.minY),Math.max(this.maxX,b.maxX),Math.max(this.maxY,b.maxY))},intersection:function(b){return new d(Math.max(this.minX,b.minX),Math.max(this.minY,b.minY),Math.min(this.maxX,b.maxX),Math.min(this.maxY,b.maxY))},withPoint:function(b){return new d(Math.min(this.minX,b.x),Math.min(this.minY,b.y),Math.max(this.maxX,b.x),Math.max(this.maxY,b.y))},withMinX:function(b){return new d(b,this.minY,this.maxX,this.maxY)},withMinY:function(b){return new d(this.minX,b,this.maxX,this.maxY)},
withMaxX:function(b){return new d(this.minX,this.minY,b,this.maxY)},withMaxY:function(b){return new d(this.minX,this.minY,this.maxX,b)},roundedOut:function(){return new d(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))},roundedIn:function(){return new d(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))},containsPoint:function(b){return this.minX<=b.x&&b.x<=this.maxX&&this.minY<=b.y&&b.y<=this.maxY},containsBounds:function(b){return this.minX<=
b.minX&&this.maxX>=b.maxX&&this.minY<=b.minY&&this.maxY>=b.maxY},intersectsBounds:function(b){return!this.intersection(b).isEmpty()},transformed:function(b){if(this.isEmpty())return d.NOTHING;var a=d.NOTHING,a=a.withPoint(b.timesVector2(new e(this.minX,this.minY))),a=a.withPoint(b.timesVector2(new e(this.minX,this.maxY))),a=a.withPoint(b.timesVector2(new e(this.maxX,this.minY)));return a=a.withPoint(b.timesVector2(new e(this.maxX,this.maxY)))},dilated:function(b){return new d(this.minX-b,this.minY-
b,this.maxX+b,this.maxY+b)},eroded:function(b){return this.dilated(-b)},toString:function(){return"[x:("+this.minX+","+this.maxX+"),y:("+this.minY+","+this.maxY+")]"},equals:function(b){return this.minX===b.minX&&this.minY===b.minY&&this.maxX===b.maxX&&this.maxY===b.maxY}};d.EVERYTHING=new d(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);d.NOTHING=new d(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY)})();
phet=phet||{};phet.ui=phet.ui||{};
(function(){phet.ui.Color=function(d,b,a,f){this.a=void 0===f?255:f;void 0===b||void 0===a?(this.r=d>>16&&255,this.g=d>>8&&255,this.b=d>>0&&255):(this.r=d,this.g=b,this.b=a)};var e=phet.ui.Color;e.BLACK=new e(0,0,0);e.BLUE=new e(0,0,255);e.CYAN=new e(0,255,255);e.DARK_GRAY=new e(64,64,64);e.GRAY=new e(128,128,128);e.GREEN=new e(0,255,0);e.LIGHT_GRAY=new e(192,192,192);e.MAGENTA=new e(255,0,255);e.ORANGE=new e(255,200,0);e.PINK=new e(255,175,175);e.RED=new e(255,0,0);e.WHITE=new e(255,255,255);e.YELLOW=
new e(255,255,0)})();phet=phet||{};phet.webgl=phet.webgl||{};
(function(){phet.webgl.getShaderFromDOM=function(e,d){var b=document.getElementById(d);if(!b)throw Error("shader DOM not found: for id="+d);for(var a="",f=b.firstChild;f;)3===f.nodeType&&(a+=f.textContent),f=f.nextSibling;if("x-shader/x-fragment"===b.type)b=e.createShader(e.FRAGMENT_SHADER);else if("x-shader/x-vertex"===b.type)b=e.createShader(e.VERTEX_SHADER);else throw Error("shader DOM type not recognized: "+b.type);e.shaderSource(b,a);e.compileShader(b);if(!e.getShaderParameter(b,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(b));
return b};phet.webgl.initWebGL=function(e){var d=null;try{d=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(b){}if(!d)throw Error("Unable to initialize WebGL. Your browser may not support it.");return d}})();phet=phet||{};phet.webgl=phet.webgl||{};
(function(){phet.webgl.GLNode=function(){this.parent=null;this.children=[];this.visible=!0;this.transform=new phet.math.Transform4;this.wrappers=[]};var e=phet.webgl.GLNode,d=phet.math.Matrix4;e.RenderState=function(){this.transform=new phet.math.Transform4;this.textureCoordinateAttribute=this.normalAttribute=this.positionAttribute=this.inverseTransposeAttribute=this.transformAttribute=null};e.prototype={constructor:e,render:function(b){this.transform.isIdentity()||b.transform.append(this.transform.getMatrix());
this.preRender(b);this.renderSelf(b);this.renderChildren(b);this.postRender(b);this.transform.isIdentity()||b.transform.append(this.transform.getInverse())},renderSelf:function(){},renderChildren:function(b){for(var a=0;a<this.children.length;a++)this.children[a].render(b)},preRender:function(b){for(var a=0;a<this.wrappers.length;a++)this.wrappers[a].preRender(b)},postRender:function(b){for(var a=0;a<this.wrappers.length;a++)this.wrappers[a].postRender(b)},addChild:function(b){phet.assert(null!==
b&&void 0!==b);this.isChild(b)||(null!==b.parent&&b.parent.removeChild(b),b.parent=this,this.children.push(b))},removeChild:function(b){phet.assert(this.isChild(b));b.parent=null;this.children.splice(this.children.indexOf(b),1)},hasParent:function(){return null!==this.parent&&void 0!==this.parent},detach:function(){this.hasParent()&&this.parent.removeChild(this)},isChild:function(b){phet.assert(b.parent===this===(-1!==this.children.indexOf(b)));return b.parent===this},translate:function(b,a,f){this.transform.append(d.translation(b,
a,f))},scale:function(b,a,f){this.transform.append(d.scaling(b,a,f))},rotate:function(b,a){this.transform.append(d.rotationAxisAngle(b,a))}}})();phet=phet||{};phet.webgl=phet.webgl||{};
(function(){var e=phet.Float32Array;phet.webgl.Quad=function(b,a,f,c,d){phet.webgl.GLNode.call(this);this.gl=b;this.width=a||1;this.height=f||1;this.xOffset=c||1;this.yOffset=d||1;this.setupBuffers()};var d=phet.webgl.Quad;d.prototype=phet.Object.create(phet.webgl.GLNode.prototype);d.prototype.constructor=d;d.prototype.setupBuffers=function(){var b=this.gl;this.positionBuffer=b.createBuffer();this.normalBuffer=b.createBuffer();this.indexBuffer=b.createBuffer();this.textureBuffer=b.createBuffer();
var a=this.width,f=this.height,c=this.xOffset,d=this.yOffset,a=[c,d,0,c+a,d,0,c+a,d+f,0,c,d+f,0],f=[0,0,1,0,0,1,0,0,1,0,0,1],c=[0,1,2,0,2,3],d=[0,0,1,0,1,1,0,1];b.bindBuffer(b.ARRAY_BUFFER,this.normalBuffer);b.bufferData(b.ARRAY_BUFFER,new e(f),b.STATIC_DRAW);this.normalBuffer.itemSize=3;this.normalBuffer.numItems=f.length/3;b.bindBuffer(b.ARRAY_BUFFER,this.textureBuffer);b.bufferData(b.ARRAY_BUFFER,new e(d),b.STATIC_DRAW);this.textureBuffer.itemSize=2;this.textureBuffer.numItems=d.length/2;b.bindBuffer(b.ARRAY_BUFFER,
this.positionBuffer);b.bufferData(b.ARRAY_BUFFER,new e(a),b.STATIC_DRAW);this.positionBuffer.itemSize=3;this.positionBuffer.numItems=a.length/3;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),b.STREAM_DRAW);this.indexBuffer.itemSize=3;this.indexBuffer.numItems=c.length};d.prototype.renderSelf=function(b){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this.positionBuffer);a.vertexAttribPointer(b.positionAttribute,this.positionBuffer.itemSize,
a.FLOAT,!1,0,0);null!==b.textureCoordinateAttribute&&(a.bindBuffer(a.ARRAY_BUFFER,this.textureBuffer),a.vertexAttribPointer(b.textureCoordinateAttribute,this.textureBuffer.itemSize,a.FLOAT,!1,0,0));null!==b.normalAttribute&&(a.bindBuffer(a.ARRAY_BUFFER,this.normalBuffer),a.vertexAttribPointer(b.normalAttribute,this.normalBuffer.itemSize,a.FLOAT,!1,0,0));null!==b.transformAttribute&&a.uniformMatrix4fv(b.transformAttribute,!1,b.transform.getMatrix().entries);null!==b.inverseTransposeAttribute&&a.uniformMatrix4fv(b.inverseTransposeAttribute,
!1,b.transform.getInverseTransposed().entries);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.drawElements(a.TRIANGLES,this.indexBuffer.numItems,a.UNSIGNED_SHORT,0)}})();phet=phet||{};phet.webgl=phet.webgl||{};
(function(){var e=phet.Float32Array;phet.webgl.Sphere=function(b,a,f,c){phet.webgl.GLNode.call(this);this.gl=b;this.radius=a;this.latitudeStrips=f||10;this.longitudeStrips=c||10;this.setupBuffers()};var d=phet.webgl.Sphere;d.prototype=phet.Object.create(phet.webgl.GLNode.prototype);d.prototype.constructor=d;d.prototype.setupBuffers=function(){var b=this.gl;this.positionBuffer=b.createBuffer();this.normalBuffer=b.createBuffer();this.indexBuffer=b.createBuffer();this.textureBuffer=b.createBuffer();
for(var a=[],f=[],c=[],d=[],j=this.latitudeStrips+1,g=this.longitudeStrips,k,p=0;p<j;p++){var m=p/(j-1);k=(m-0.5)*Math.PI;var q=Math.cos(k),t=Math.sin(k);for(k=0;k<=g;k++){var s=k/g,u=2*s*Math.PI,h=Math.cos(u),r=Math.sin(u),u=r*q,r=r*t;a.push(u*this.radius);a.push(r*this.radius);a.push(h*this.radius);f.push(u);f.push(r);f.push(h);d.push(s);d.push(m)}if(0<p){m=(p-1)*(g+1);q=p*(g+1);for(k=1;k<=g;k++)c.push(m+k-1),c.push(q+k-1),c.push(q+k),c.push(m+k-1),c.push(q+k),c.push(m+k)}}b.bindBuffer(b.ARRAY_BUFFER,
this.normalBuffer);b.bufferData(b.ARRAY_BUFFER,new e(f),b.STATIC_DRAW);this.normalBuffer.itemSize=3;this.normalBuffer.numItems=f.length/3;b.bindBuffer(b.ARRAY_BUFFER,this.textureBuffer);b.bufferData(b.ARRAY_BUFFER,new e(d),b.STATIC_DRAW);this.textureBuffer.itemSize=2;this.textureBuffer.numItems=d.length/2;b.bindBuffer(b.ARRAY_BUFFER,this.positionBuffer);b.bufferData(b.ARRAY_BUFFER,new e(a),b.STATIC_DRAW);this.positionBuffer.itemSize=3;this.positionBuffer.numItems=a.length/3;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),b.STREAM_DRAW);this.indexBuffer.itemSize=3;this.indexBuffer.numItems=c.length};d.prototype.renderSelf=function(b){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this.positionBuffer);a.vertexAttribPointer(b.positionAttribute,this.positionBuffer.itemSize,a.FLOAT,!1,0,0);null!==b.textureCoordinateAttribute&&(a.bindBuffer(a.ARRAY_BUFFER,this.textureBuffer),a.vertexAttribPointer(b.textureCoordinateAttribute,this.textureBuffer.itemSize,
a.FLOAT,!1,0,0));null!==b.normalAttribute&&(a.bindBuffer(a.ARRAY_BUFFER,this.normalBuffer),a.vertexAttribPointer(b.normalAttribute,this.normalBuffer.itemSize,a.FLOAT,!1,0,0));null!==b.transformAttribute&&a.uniformMatrix4fv(b.transformAttribute,!1,b.transform.getMatrix().entries);null!==b.inverseTransposeAttribute&&a.uniformMatrix4fv(b.inverseTransposeAttribute,!1,b.transform.getInverseTransposed().entries);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.drawElements(a.TRIANGLES,this.indexBuffer.numItems,
a.UNSIGNED_SHORT,0)};d.prototype.intersect=function(b,a){a=void 0===a?1E-5:a;var f=new phet.math.Vector3,c=b.dir,d=b.pos,e=d.minus(f),g=c.dot(e),e=e.magnitudeSquared(),g=4*g*g-4*(e-this.radius*this.radius);if(g<a)return null;d=c.dot(f)-c.dot(d);g=Math.sqrt(g)/2;c=d-g;d+=g;if(d<a)return null;g=b.pointAtDistance(d);e=g.minus(f).normalized();if(c<a)return{distance:d,hitPoint:g,normal:e.negated(),fromOutside:!1};d=b.pointAtDistance(c);f=d.minus(f).normalized();return{distance:c,hitPoint:d,normal:f,fromOutside:!0}}})();
phet=phet||{};phet.webgl=phet.webgl||{};
(function(){var e=phet.Float32Array;phet.webgl.Cylinder=function(b,a,f,c,d){phet.webgl.GLNode.call(this);this.gl=b;this.radius=a;this.length=f;this.radialStrips=c||16;this.axisStrips=d||1;this.setupBuffers()};var d=phet.webgl.Cylinder;d.prototype=phet.Object.create(phet.webgl.GLNode.prototype);d.prototype.constructor=d;d.prototype.setupBuffers=function(){var b=this.gl;this.positionBuffer=b.createBuffer();this.normalBuffer=b.createBuffer();this.indexBuffer=b.createBuffer();this.textureBuffer=b.createBuffer();
for(var a=[],f=[],c=[],d=[],j=this.radialStrips+1,g=this.axisStrips+1,k=0;k<j;k++)for(var p=k/(j-1),m=2*p*Math.PI,q=Math.cos(m),m=Math.sin(m),t=0;t<g;t++){var s=t/(g-1),u=(s-0.5)*this.length;a.push(q*this.radius);a.push(m*this.radius);a.push(u);f.push(q);f.push(m);f.push(0);d.push(p);d.push(s);0<k&&0<t&&(s=(k-1)*g,u=k*g,c.push(s+t-1),c.push(u+t-1),c.push(u+t),c.push(s+t-1),c.push(u+t),c.push(s+t))}b.bindBuffer(b.ARRAY_BUFFER,this.normalBuffer);b.bufferData(b.ARRAY_BUFFER,new e(f),b.STATIC_DRAW);this.normalBuffer.itemSize=
3;this.normalBuffer.numItems=f.length/3;b.bindBuffer(b.ARRAY_BUFFER,this.textureBuffer);b.bufferData(b.ARRAY_BUFFER,new e(d),b.STATIC_DRAW);this.textureBuffer.itemSize=2;this.textureBuffer.numItems=d.length/2;b.bindBuffer(b.ARRAY_BUFFER,this.positionBuffer);b.bufferData(b.ARRAY_BUFFER,new e(a),b.STATIC_DRAW);this.positionBuffer.itemSize=3;this.positionBuffer.numItems=a.length/3;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),b.STREAM_DRAW);
this.indexBuffer.itemSize=3;this.indexBuffer.numItems=c.length};d.prototype.renderSelf=function(b){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this.positionBuffer);a.vertexAttribPointer(b.positionAttribute,this.positionBuffer.itemSize,a.FLOAT,!1,0,0);null!==b.textureCoordinateAttribute&&(a.bindBuffer(a.ARRAY_BUFFER,this.textureBuffer),a.vertexAttribPointer(b.textureCoordinateAttribute,this.textureBuffer.itemSize,a.FLOAT,!1,0,0));null!==b.normalAttribute&&(a.bindBuffer(a.ARRAY_BUFFER,this.normalBuffer),
a.vertexAttribPointer(b.normalAttribute,this.normalBuffer.itemSize,a.FLOAT,!1,0,0));null!==b.transformAttribute&&a.uniformMatrix4fv(b.transformAttribute,!1,b.transform.getMatrix().entries);null!==b.inverseTransposeAttribute&&a.uniformMatrix4fv(b.inverseTransposeAttribute,!1,b.transform.getInverseTransposed().entries);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.drawElements(a.TRIANGLES,this.indexBuffer.numItems,a.UNSIGNED_SHORT,0)}})();phet=phet||{};phet.canvas=phet.canvas||{};
(function(){phet.canvas.initCanvas=function(e){var d=null;try{d=e.getContext("2d")}catch(b){}if(!d)throw Error("Unable to initialize HTML5 canvas. Your browser may not support it.");return d};phet.canvas.backingScale=function(e){return"devicePixelRatio"in window&&1<window.devicePixelRatio&&2>e.webkitBackingStorePixelRatio?window.devicePixelRatio:1}})();var scenery=scenery||{};
(function(){var e=!1,d=phet.math.Matrix3,b=phet.math.Transform3,a=phet.math.Bounds2,f=phet.math.Vector2;scenery.canvasTextBoundsAccurate=function(a,b){phet.assert(void 0!==b);return scenery.canvasAccurateBounds(function(f){f.font=b.font;f.textAlign=b.textAlign;f.textBaseline=b.textBaseline;f.direction=b.direction;f.fillText(a,0,0)})};scenery.scanBounds=function(b,d,e){for(var g=_.map(_.range(d),function(){return!1}),k=_.map(_.range(d),function(){return!1}),p=0;p<d;p++)for(var m=0;m<d;m++){var q=4*
(m*d+p);if(0!==b.data[q]||0!==b.data[q+1]||0!==b.data[q+2]||0!==b.data[q+3])g[p]=!0,k[m]=!0}b=_.indexOf(g,!0);g=_.lastIndexOf(g,!0);p=_.indexOf(k,!0);k=_.lastIndexOf(k,!0);m=d/16;return{minBounds:new a(1>b||b>=d-1?Number.POSITIVE_INFINITY:e.inversePosition2(new f(b+1+m,0)).x,1>p||p>=d-1?Number.POSITIVE_INFINITY:e.inversePosition2(new f(0,p+1+m)).y,1>g||g>=d-1?Number.NEGATIVE_INFINITY:e.inversePosition2(new f(g-m,0)).x,1>k||k>=d-1?Number.NEGATIVE_INFINITY:e.inversePosition2(new f(0,k-m)).y),maxBounds:new a(1>
b||b>=d-1?Number.NEGATIVE_INFINITY:e.inversePosition2(new f(b-1-m,0)).x,1>p||p>=d-1?Number.NEGATIVE_INFINITY:e.inversePosition2(new f(0,p-1-m)).y,1>g||g>=d-1?Number.POSITIVE_INFINITY:e.inversePosition2(new f(g+2+m,0)).x,1>k||k>=d-1?Number.POSITIVE_INFINITY:e.inversePosition2(new f(0,k+2+m)).y)}};scenery.canvasAccurateBounds=function(c,n){function j(a){u.save();a.matrix.canvasSetTransform(u);c(u);u.restore();var b=u.getImageData(0,0,p,p);a=scenery.scanBounds(b,p,a);if(e){var f=document.createElement("canvas");
f.width=p;f.height=p;phet.canvas.initCanvas(f).putImageData(b,0,0);$(f).css("border","1px solid black");$(window).ready(function(){$("#display").append(f)})}u.clearRect(0,0,p,p);return a}function g(a){var f=(p-4)/(a.maxX-a.minX),c=(p-4)/(a.maxY-a.minY);return new b(d.translation(-f*a.minX+2,-c*a.minY+2).timesMatrix(d.scaling(f,c)))}var k=n&&n.precision?n.precision:0.001,p=n&&n.resolution?n.resolution:128,m=n&&n.initialScale?n.initialScale:0.0625,q=a.NOTHING,t=a.EVERYTHING,s=document.createElement("canvas");
s.width=p;s.height=p;var u=phet.canvas.initCanvas(s);e&&$(window).ready(function(){var a=document.createElement("h2");$(a).text("Bounds Scan");$("#display").append(a)});s=new b;s.append(d.translation(p/2,p/2));s.append(d.scaling(m));for(var m=j(s),q=q.union(m.minBounds),t=t.intersection(m.maxBounds),h,m=t.minY,s=t.maxY;isFinite(q.minX)&&isFinite(t.minX)&&Math.abs(q.minX-t.minX)>k;){h=j(g(new a(t.minX,m,q.minX,s)));if(q.minX<=h.minBounds.minX&&t.minX>=h.maxBounds.minX){e&&(console.log("warning, exiting infinite loop!"),
console.log('transformed "min" minX: '+g(new a(t.minX,t.minY,q.minX,t.maxY)).transformPosition2(new f(q.minX,0))),console.log('transformed "max" minX: '+g(new a(t.minX,t.minY,q.minX,t.maxY)).transformPosition2(new f(t.minX,0))));break}q=q.withMinX(Math.min(q.minX,h.minBounds.minX));t=t.withMinX(Math.max(t.minX,h.maxBounds.minX));m=Math.max(m,h.maxBounds.minY);s=Math.min(s,h.maxBounds.maxY)}m=t.minY;for(s=t.maxY;isFinite(q.maxX)&&isFinite(t.maxX)&&Math.abs(q.maxX-t.maxX)>k;){h=j(g(new a(q.maxX,m,t.maxX,
s)));if(q.maxX>=h.minBounds.maxX&&t.maxX<=h.maxBounds.maxX){e&&console.log("warning, exiting infinite loop!");break}q=q.withMaxX(Math.max(q.maxX,h.minBounds.maxX));t=t.withMaxX(Math.min(t.maxX,h.maxBounds.maxX));m=Math.max(m,h.maxBounds.minY);s=Math.min(s,h.maxBounds.maxY)}m=t.minX;for(s=t.maxX;isFinite(q.minY)&&isFinite(t.minY)&&Math.abs(q.minY-t.minY)>k;){h=j(g(new a(m,t.minY,s,q.minY)));if(q.minY<=h.minBounds.minY&&t.minY>=h.maxBounds.minY){e&&console.log("warning, exiting infinite loop!");break}q=
q.withMinY(Math.min(q.minY,h.minBounds.minY));t=t.withMinY(Math.max(t.minY,h.maxBounds.minY));m=Math.max(m,h.maxBounds.minX);s=Math.min(s,h.maxBounds.maxX)}m=t.minX;for(s=t.maxX;isFinite(q.maxY)&&isFinite(t.maxY)&&Math.abs(q.maxY-t.maxY)>k;){h=j(g(new a(m,q.maxY,s,t.maxY)));if(q.maxY>=h.minBounds.maxY&&t.maxY<=h.maxBounds.maxY){e&&console.log("warning, exiting infinite loop!");break}q=q.withMaxY(Math.max(q.maxY,h.minBounds.maxY));t=t.withMaxY(Math.min(t.maxY,h.maxBounds.maxY));m=Math.max(m,h.maxBounds.minX);
s=Math.min(s,h.maxBounds.maxX)}e&&(console.log("minBounds: "+q),console.log("maxBounds: "+t));k=new a((q.minX+t.minX)/2,(q.minY+t.minY)/2,(q.maxX+t.maxX)/2,(q.maxY+t.maxY)/2);k.minBounds=q;k.maxBounds=t;k.isConsistent=t.containsBounds(q);k.precision=Math.max(Math.abs(q.minX-t.minX),Math.abs(q.minY-t.minY),Math.abs(q.maxX-t.maxX),Math.abs(q.maxY-t.maxY));return k}})();scenery=scenery||{};
(function(){function e(a,b){return new f(a,b)}function d(a,b){phet.assert(void 0!==b);return a.start.plus(a.startTangent.perpendicular().negated().times(b/2))}function b(a,b){phet.assert(void 0!==b);return a.start.plus(a.startTangent.perpendicular().times(b/2))}function a(a,b,f,c){return e(((a.x*b.y-a.y*b.x)*(f.x-c.x)-(a.x-b.x)*(f.x*c.y-f.y*c.x))/((a.x-b.x)*(f.y-c.y)-(a.y-b.y)*(f.x-c.x)),((a.x*b.y-a.y*b.x)*(f.y-c.y)-(a.y-b.y)*(f.x*c.y-f.y*c.x))/((a.x-b.x)*(f.y-c.y)-(a.y-b.y)*(f.x-c.x)))}var f=phet.math.Vector2;
scenery.Shape=function(a,b){this.pieces=[];this.subpaths=[];this.bounds=phet.math.Bounds2.NOTHING;this._strokedShape=null;this._strokedShapeComputed=!1;this._strokedShapeStyles=null;var f=this;void 0!==a&&_.each(a,function(a){f.addPiece(a)});b&&this.addPiece(new g.Close)};var c=scenery.Shape;c.prototype={constructor:c,moveTo:function(a,b){if(void 0===b&&"object"===typeof a){var c=a instanceof f?a:new f(a.x,a.y);this.addPiece(new g.MoveTo(c))}else this.addPiece(new g.MoveTo(e(a,b)));return this},lineTo:function(a,
b){if(void 0===b&&"object"===typeof a){var c=a instanceof f?a:new f(a.x,a.y);this.addPiece(new g.LineTo(c))}else this.addPiece(new g.LineTo(e(a,b)));return this},quadraticCurveTo:function(a,b,c,d){void 0===c&&"object"===typeof a?(a=a instanceof f?a:new f(a.x,a.y),b=b instanceof f?b:new f(b.x,b.y),this.addPiece(new g.QuadraticCurveTo(a,b))):this.addPiece(new g.QuadraticCurveTo(e(a,b),e(c,d)));return this},rect:function(a,b,c,d){void 0===c&&"object"===typeof a&&"object"===typeof b?(a=a instanceof f?
a:new f(a.x,a.y),b=b instanceof f?b:new f(b.x,b.y),this.addPiece(new g.Rect(a,b))):this.addPiece(new g.Rect(e(a,b),e(a+c,b+d)));return this},close:function(){this.addPiece(new g.Close)},addPiece:function(a){this.pieces.push(a);a.applyPiece(this);this.invalidate()},writeToContext:function(a){_.each(this.pieces,function(b){b.writeToContext(a)})},transformed:function(a){return new c(_.flatten(_.map(this.pieces,function(b){return b.transformed(a)}),!0))},computeBounds:function(a){return a?this.bounds.union(this.getStrokedShape(a).bounds):
this.bounds},containsPoint:function(a){var b=0,f=new phet.math.Ray2(a,e(1,0));_.each(this.subpaths,function(a){a.isDrawable()&&(_.each(a.segments,function(a){b+=a.windingIntersection(f)}),a.hasClosingSegment()&&(b+=a.getClosingSegment().windingIntersection(f)))});return 0!==b},intersectsBounds:function(a){var b=!1;_.each(this.subpaths,function(f){f.isDrawable()&&(_.each(f.segments,function(f){b=b&&f.intersectsBounds(a)}),f.hasClosingSegment()&&(b=b&&f.getClosingSegment().intersectsBounds(a)))});return b},
invalidate:function(){this._strokedShapeComputed=!1},getStrokedShape:function(f){function e(b,c,d){var n=b.plus(c.perpendicular().negated().times(u/2));b=b.plus(d.perpendicular().negated().times(u/2));if(0<c.perpendicular().dot(d))switch(f.lineJoin){case "round":throw Error("stroked round lineJoin not implemented .. add arc/arcTo");case "miter":var j=c.angleBetween(d.negated());1/Math.sin(j/2)<=f.miterLimit&&(c=a(n,n.plus(c),b,b.plus(d)),s.addPiece(new g.LineTo(c)));s.addPiece(new g.LineTo(b));break;
case "bevel":s.addPiece(new g.LineTo(b))}else n.equals(b)||s.addPiece(new g.LineTo(b))}function j(a,b){switch(f.lineCap){case "butt":s.addPiece(new g.LineTo(a.plus(b.perpendicular().times(u/2))));break;case "round":throw Error("stroked round lineCap not implemented .. add arc/arcTo");case "square":var c=b.perpendicular().negated().times(u/2),d=b.perpendicular().times(u/2),e=b.times(u/2);s.addPiece(new g.LineTo(a.plus(c).plus(e)));s.addPiece(new g.LineTo(a.plus(d).plus(e)));s.addPiece(new g.LineTo(a.plus(d)))}}
void 0===f&&(f=new n);if(this._strokedShapeComputed&&this._strokedShapeStyles.equals(f))return this._strokedShape;var t=_.filter(this.subpaths,function(a){return a.isDrawable()}),s=new c,u=f.lineWidth;_.each(t,function(a){var f,c=a.segments,p=_.last(c).end.equals(_.first(c).start),n=p?null:new k.Line(c[c.length-1].end,c[0].start);s.addPiece(new g.MoveTo(d(_.first(c),u)));for(f=0;f<c.length;f++)0<f&&e(c[f].start,c[f-1].endTangent,c[f].startTangent,!0),_.each(c[f].strokeLeft(u),function(a){s.addPiece(a)});
a.closed?p?(e(_.last(c).end,_.last(c).endTangent,_.first(c).startTangent),s.addPiece(new g.Close),s.addPiece(new g.MoveTo(b(_.first(c),u))),e(_.last(c).end,_.first(c).startTangent.negated(),_.last(c).endTangent.negated())):(e(n.start,_.last(c).endTangent,n.startTangent),_.each(n.strokeLeft(u),function(a){s.addPiece(a)}),e(n.end,n.endTangent,_.first(c).startTangent),s.addPiece(new g.Close),s.addPiece(new g.MoveTo(b(_.first(c),u))),e(n.end,_.first(c).startTangent.negated(),n.endTangent.negated()),_.each(n.strokeRight(u),
function(a){s.addPiece(a)}),e(n.start,n.startTangent.negated(),_.last(c).endTangent.negated())):j(_.last(c).end,_.last(c).endTangent);for(f=c.length-1;0<=f;f--)f<c.length-1&&e(c[f].end,c[f+1].startTangent.negated(),c[f].endTangent.negated(),!1),_.each(c[f].strokeRight(u),function(a){s.addPiece(a)});a.closed||j(_.first(c).start,_.first(c).startTangent.negated());s.addPiece(new g.Close)});this._strokedShape=s;this._strokedShapeComputed=!0;this._strokedShapeStyles=new n(f);return s},ensure:function(a){this.hasSubpaths()||
(this.addSubpath(new j),this.getLastSubpath().addPoint(a))},addSubpath:function(a){this.subpaths.push(a)},hasSubpaths:function(){return 0<this.subpaths.length},getLastSubpath:function(){return _.last(this.subpaths)}};c.rectangle=function(a,b,f,d){return(new c).rect(a,b,f,d)};c.rect=c.rectangle;c.bounds=function(a){return(new c).rect(e(a.minX,a.minY),e(a.maxX,a.maxY))};c.lineSegment=function(a,b){return(new c).moveTo(a).lineTo(b)};c.regularPolygon=function(a,b){var f=!0;return new c(_.map(_.range(a),
function(c){c=2*Math.PI*c/a;return f?(f=!1,new g.MoveTo(e(b*Math.cos(c),b*Math.sin(c)))):new g.LineTo(e(b*Math.cos(c),b*Math.sin(c)))}),!0)};c.LineStyles=function(a){void 0===a&&(a={});this.lineWidth=void 0!==a.lineWidth?a.lineWidth:1;this.lineCap=void 0!==a.lineCap?a.lineCap:"butt";this.lineJoin=void 0!==a.lineJoin?a.lineJoin:"miter";this.miterLimit=void 0!==a.miterLimit?a.miterLimit:10};var n=c.LineStyles;n.prototype={constructor:n,equals:function(a){return this.lineWidth===a.lineWidth&&this.lineCap===
a.lineCap&&this.lineJoin===a.lineJoin&&this.miterLimit===a.miterLimit}};c.Subpath=function(){this.points=[];this.segments=[];this.closed=!1};var j=c.Subpath;j.prototype={addPoint:function(a){this.points.push(a)},addSegment:function(a){this.segments.push(a)},close:function(){this.closed=!0},getFirstPoint:function(){return _.first(this.points)},getLastPoint:function(){return _.last(this.points)},isDrawable:function(){return 0<this.segments.length},isClosed:function(){return this.closed},hasClosingSegment:function(){return!this.getFirstPoint().equals(this.getLastPoint())},
getClosingSegment:function(){phet.assert(this.isClosed());return new k.Line(this.getLastPoint(),this.getFirstPoint())}};c.Piece={};var g=c.Piece;g.Close=function(){};g.Close.prototype={constructor:g.Close,writeToContext:function(a){a.closePath()},transformed:function(){return[this]},applyPiece:function(a){if(a.hasSubpaths()){var b=a.getLastSubpath(),f=new j;b.close();a.addSubpath(f);f.addPoint(b.getFirstPoint())}}};g.MoveTo=function(a){this.point=a};g.MoveTo.prototype={constructor:g.MoveTo,writeToContext:function(a){a.moveTo(this.point.x,
this.point.y)},transformed:function(a){return[new g.MoveTo(a.timesVector2(this.point))]},applyPiece:function(a){var b=new j;b.addPoint(this.point);a.addSubpath(b)}};g.LineTo=function(a){this.point=a};g.LineTo.prototype={constructor:g.LineTo,writeToContext:function(a){a.lineTo(this.point.x,this.point.y)},transformed:function(a){return[new g.LineTo(a.timesVector2(this.point))]},applyPiece:function(a){if(a.hasSubpaths()){var b=a.getLastSubpath().getLastPoint(),f=this.point,c=new k.Line(b,f);a.getLastSubpath().addSegment(c);
a.getLastSubpath().addPoint(f);a.bounds=a.bounds.withPoint(b).withPoint(f);phet.assert(!isNaN(a.bounds.x()))}else a.ensure(this.point)}};g.QuadraticCurveTo=function(a,b){this.controlPoint=a;this.point=b};g.QuadraticCurveTo.prototype={constructor:g.QuadraticCurveTo,writeToContext:function(a){a.quadraticCurveTo(this.controlPoint.x,this.controlPoint.y,this.point.x,this.point.y)},transformed:function(a){return[new g.QuadraticCurveTo(a.timesVector2(this.controlPoint),a.timesVector2(this.point))]},applyPiece:function(a){a.ensure(this.controlPoint);
var b=a.getLastSubpath().getLastPoint(),b=new k.Quadratic(b,this.controlPoint,this.point);a.getLastSubpath().addSegment(b);a.getLastSubpath().addPoint(this.point);a.bounds=a.bounds.union(b.bounds)}};g.Rect=function(a,b){this.upperLeft=a;this.lowerRight=b;this.x=this.upperLeft.x;this.y=this.upperLeft.y;this.width=this.lowerRight.x-this.x;this.height=this.lowerRight.y-this.y};g.Rect.prototype={constructor:g.Rect,writeToContext:function(a){a.rect(this.x,this.y,this.width,this.height)},transformed:function(a){var b=
a.timesVector2(e(this.x,this.y)),f=a.timesVector2(e(this.x+this.width,this.y)),c=a.timesVector2(e(this.x+this.width,this.y+this.height));a=a.timesVector2(e(this.x,this.y+this.height));return[new g.MoveTo(b),new g.LineTo(f),new g.LineTo(c),new g.LineTo(a),new g.Close,new g.MoveTo(b)]},applyPiece:function(a){var b=new j;a.addSubpath(b);b.addPoint(e(this.x,this.y));b.addPoint(e(this.x+this.width,this.y));b.addPoint(e(this.x+this.width,this.y+this.height));b.addPoint(e(this.x,this.y+this.height));b.addSegment(new k.Line(b.points[0],
b.points[1]));b.addSegment(new k.Line(b.points[1],b.points[2]));b.addSegment(new k.Line(b.points[2],b.points[3]));b.close();a.addSubpath(new j);a.getLastSubpath().addPoint(e(this.x,this.y));a.bounds=a.bounds.withPoint(this.upperLeft).withPoint(this.lowerRight);phet.assert(!isNaN(a.bounds.x()))}};c.Segment={};var k=c.Segment;k.Line=function(a,b){this.start=a;this.end=b;this.endTangent=this.startTangent=b.minus(a).normalized();this.bounds=(new phet.math.Bounds2).withPoint(a).withPoint(b)};k.Line.prototype=
{constructor:k.Line,toPieces:function(){return[new g.LineTo(this.end)]},strokeLeft:function(a){return[new g.LineTo(this.end.plus(this.endTangent.perpendicular().negated().times(a/2)))]},strokeRight:function(a){return[new g.LineTo(this.start.plus(this.startTangent.perpendicular().times(a/2)))]},intersectsBounds:function(){throw Error("Segment.Line.intersectsBounds unimplemented");},windingIntersection:function(b){var f=this.start,c=this.end,d=a(f,c,b.pos,b.pos.plus(b.dir));return!isFinite(d.x)||!isFinite(d.y)||
f.x!==c.x&&(f.x>c.x?d.x>=f.x||d.x<c.x:d.x<=f.x||d.x>c.x)||f.y!==c.y&&(f.y>c.y?d.y>=f.y||d.y<c.y:d.y<=f.y||d.y>c.y)||0>d.minus(b.pos).dot(b.dir)?0:0>b.dir.perpendicular().dot(c.minus(f))?1:-1}};k.Quadratic=function(a,b,f,c){this.start=a;this.control=b;this.end=f;if(!c){c=a.equals(b);var d=f.equals(b);phet.assert(!c||!d);this.startTangent=c?f.minus(a).normalized():b.minus(a).normalized();this.endTangent=d?f.minus(a).normalized():f.minus(b).normalized();this.bounds=new phet.math.Bounds2(Math.min(a.x,
f.x),Math.min(a.y,f.y),Math.max(a.x,f.x),Math.max(a.y,f.y));c=2*(f.x-2*b.x+a.x);0!==c&&(c=-2*(b.x-a.x)/c,0<c&&1>c&&(this.bounds=this.bounds.withPoint(this.positionAt(c))));f=2*(f.y-2*b.y+a.y);0!==f&&(c=-2*(b.y-a.y)/f,0<c&&1>c&&(this.bounds=this.bounds.withPoint(this.positionAt(c))))}};k.Quadratic.prototype={constructor:k.Quadratic,positionAt:function(a){var b=1-a;return this.start.times(b*b).plus(this.control.times(2*b*a)).plus(this.end.times(a*a))},derivativeAt:function(a){return this.control.minus(this.start).times(2*
(1-a)).plus(this.end.minus(this.control).times(2*a))},offsetTo:function(a,b,f){for(var c=[this],d=0;5>d;d++)c=_.flatten(_.map(c,function(a){return a.subdivided(!0)}));c=_.map(c,function(b){return b.approximateOffset(a)});f&&(c.reverse(),c=_.map(c,function(a){return a.reversed(!0)}));f=_.map(c,function(a){return new g.QuadraticCurveTo(a.control,a.end)});return b?[new g.MoveTo(c[0].start)].concat(f):f},subdivided:function(a){var b=this.start.plus(this.control).times(0.5),f=this.control.plus(this.end).times(0.5),
c=b.plus(f).times(0.5);return[new k.Quadratic(this.start,b,c,a),new k.Quadratic(c,f,this.end,a)]},reversed:function(){return new k.Quadratic(this.end,this.control,this.start)},approximateOffset:function(a){return new k.Quadratic(this.start.plus((this.start.equals(this.control)?this.end.minus(this.start):this.control.minus(this.start)).perpendicular().normalized().times(a)),this.control.plus(this.end.minus(this.start).perpendicular().normalized().times(a)),this.end.plus((this.end.equals(this.control)?
this.end.minus(this.start):this.end.minus(this.control)).perpendicular().normalized().times(a)))},toPieces:function(){return[new g.QuadraticCurveTo(this.control,this.end)]},strokeLeft:function(a){return this.offsetTo(-a/2,!1,!1)},strokeRight:function(a){return this.offsetTo(a/2,!1,!0)},intersectsBounds:function(){throw Error("Segment.Quadratic.intersectsBounds unimplemented");},windingIntersection:function(a){var b=phet.math.Matrix3.rotation2(-a.dir.angle());phet.assert(0.99<b.timesVector2(a.dir).x);
var f=b.timesVector2(this.start),c=b.timesVector2(this.control),d=b.timesVector2(this.end),e=c.y*c.y-f.y*d.y;if(1E-8>e)return 0;b=(f.y-c.y+Math.sqrt(e))/(f.y-2*c.y+d.y);f=(f.y-c.y-Math.sqrt(e))/(f.y-2*c.y+d.y);c=this.positionAt(b).minus(a.pos);d=this.positionAt(f).minus(a.pos);c=0<b&&0<c.dot(a.dir);d=0<f&&0<d.dot(a.dir);e=0;c&&(e+=0>a.dir.perpendicular().dot(this.derivativeAt(b))?1:-1);d&&(e+=0>a.dir.perpendicular().dot(this.derivativeAt(f))?1:-1);return e}};k.Cubic=function(a,b,f,c){this.start=a;
this.control1=b;this.control2=f;this.end=c};k.Cubic.prototype={}})();scenery=scenery||{};
(function(){var e=phet.math.Bounds2;scenery.Node=function(a){this._visible=!0;this._clipShape=this._layerType=null;this.children=[];this.transform=new phet.math.Transform3;this.parent=null;this._isRoot=!1;this._inputListeners=[];this._includeStrokeInHitRegion=!1;this._layerReference=this._layerAfterRender=this._layerBeforeRender=null;this._hasLayerBelow=!1;this._childBounds=this._selfBounds=this._bounds=e.NOTHING;this._childBoundsDirty=this._selfBoundsDirty=this._boundsDirty=!0;this._oldPaintMarked=
this._childPaintDirty=this._paintDirty=!1;a&&this.mutate(a)};var d=scenery.Node,b=phet.math.Matrix3;d.prototype={constructor:d,renderSelf:function(){},enterState:function(a){this._layerBeforeRender&&a.switchToLayer(this._layerBeforeRender);this.transform.isIdentity()||a.applyTransformationMatrix(this.transform.getMatrix());this._clipShape&&a.pushClipShape(this._clipShape)},exitState:function(a){this._clipShape&&a.popClipShape();this.transform.isIdentity()||a.applyTransformationMatrix(this.transform.getInverse());
this._layerAfterRender&&a.switchToLayer(this._layerAfterRender)},insertChild:function(a,b){phet.assert(null!==a&&void 0!==a);if(!this.isChild(a)){null!==a.parent&&a.parent.removeChild(a);a.parent=this;this.children.splice(b,0,a);a.invalidateBounds();a.invalidatePaint();if(a._hasLayerBelow||a.isLayerRoot()){for(var c=this;null!==c&&!c._hasLayerBelow;)c._hasLayerBelow=!0,c=c.parent;this.markLayerRefreshNeeded()}if(!this._hasLayerBelow&&this.isRooted()&&a._layerReference!==this._layerReference){var d=
this._layerReference;a.walkDepthFirst(function(a){a._layerReference=d})}}},addChild:function(a){this.insertChild(a,this.children.length)},removeChild:function(a){phet.assert(this.isChild(a));a.markOldPaint();a.parent=null;this.children.splice(this.children.indexOf(a),1);this.invalidateBounds();if(a._hasLayerBelow||a.isLayerRoot()){for(;null!==this&&!(this._hasLayerBelow=_.some(this.children,function(a){return a._hasLayerBelow})););this.markLayerRefreshNeeded()}},setLayerType:function(a){if(this._layerType!==
a){this._layerType=a;for(a=this.parent;null!==a;)a._hasLayerBelow=!0,a=a.parent;this.markLayerRefreshNeeded()}},getLayerType:function(){return this._layerType},detach:function(){this.hasParent()&&this.parent.removeChild(this)},validateBounds:function(){var a=this;this._selfBoundsDirty&&(this._selfBoundsDirty=!1,this.markDirtyRegion(this._selfBounds));this._childBoundsDirty&&(_.each(this.children,function(a){a.validateBounds()}),this._childBounds=e.NOTHING,_.each(this.children,function(b){a._childBounds=
a._childBounds.union(b._bounds)}),this._childBoundsDirty=!1);if(this._boundsDirty){var b=this._bounds,c=this.localToParentBounds(this._selfBounds).union(a.localToParentBounds(this._childBounds));c.equals(b)||(this._bounds=c,null!==this.parent&&this.parent.invalidateBounds());this._boundsDirty=!1}},validatePaint:function(){this._paintDirty&&(this.markDirtyRegion(this.parentToLocalBounds(this._bounds)),this._paintDirty=!1);if(this._childPaintDirty||this._oldPaintMarked)this._oldPaintMarked=this._childPaintDirty=
!1,_.each(this.children,function(a){a.validatePaint()})},invalidateBounds:function(){this._boundsDirty=!0;for(var a=this.parent;null!==a&&!a._childBoundsDirty;)a._childBoundsDirty=!0,a=a.parent},invalidatePaint:function(){this._paintDirty=!0;for(var a=this.parent;null!==a&&!a._childPaintDirty;)a._childPaintDirty=!0,a=a.parent},invalidateSelf:function(a){phet.assert(!isNaN(a.x()));this.markOldSelfPaint();this._selfBounds.equals(a)||(this._selfBoundsDirty=!0,this.invalidateBounds(),this._selfBounds=
a);this.invalidatePaint()},markDirtyRegion:function(a){var b=this.localToGlobalBounds(a);_.each(this.findDescendantLayers(),function(a){a.markDirtyRegion(b)})},markOldSelfPaint:function(){this.markOldPaint(!0)},markLayerRefreshNeeded:function(){this.isRooted()&&this.getScene().layersDirtyUnder(this)},markOldPaint:function(a){for(var b=this,c=this._oldPaintMarked;!c&&null!==b.parent;)b=b.parent,c=b._oldPaintMarked;c||(a?this.markDirtyRegion(this._selfBounds):(this.markDirtyRegion(this.parentToLocalBounds(this._bounds)),
this._oldPaintMarked=!0))},isChild:function(a){phet.assert(a.parent===this===(-1!==this.children.indexOf(a)));return a.parent===this},isLayerRoot:function(){return null!==this._layerType},getLayer:function(){phet.assert(this.isLayerRoot());return this._layerBeforeRender},getSelfBounds:function(){return this._selfBounds},getBounds:function(){this.validateBounds();return this._bounds},findLayer:function(){return this._layerReference},findDescendantLayers:function(){var a=this.findLayer();if(null===
a)return[];for(var b=this;0!==b.children.length;)b=_.last(b.children);for(var b=b.findLayer(),c=[a];a!==b&&null!==a.nextLayer;)a=a.nextLayer,c.push(a);return c},getBaseNode:function(){return this.parent?this.parent.getBaseNode():this},isRoot:function(){return this._isRoot},isRooted:function(){return this.getBaseNode().isRoot()},getScene:function(){return this.getBaseNode().scene},nodeUnderPoint:function(a){this.validateBounds();if(!this._bounds.containsPoint(a))return null;a=this.transform.inversePosition2(a);
if(0<this.children.length&&this._childBounds.containsPoint(a))for(var b=this.children.length-1;0<=b;b--){var c=this.children[b].nodeUnderPoint(a);if(c)return c}return this._selfBounds.containsPoint(a)&&this.containsPointSelf(a)?this:null},containsPoint:function(a){return null!==this.nodeUnderPoint(a)},containsPointSelf:function(a){return this._selfBounds.containsPoint(a)},intersectsBoundsSelf:function(a){return this._selfBounds.intersectsBounds(a)},hasParent:function(){return null!==this.parent},
hasChildren:function(){return 0<this.children.length},walkDepthFirst:function(a){a(this);_.each(this.children,function(b){b.walkDepthFirst(a)})},getChildrenWithinBounds:function(a){return _.filter(this.children,function(b){return!b._bounds.intersection(a).isEmpty()})},getAncestors:function(){return this.parent?this.parent.getPathToRoot():[]},getChildren:function(){return this.children.slice(0)},getPathToRoot:function(){for(var a=[],b=this;null!==b;)a.unshift(b),b=b.parent;return a},getPreviousRenderedNode:function(){if(null===
this.parent)return null;var a=_.indexOf(this.parent.children,this);if(0>a-1)return this.parent;for(a=this.parent.children[a-1];0<a.children.length;)a=_.last(a.children)},getNextRenderedNode:function(){for(var a=this.parent;null!==a;){var b=_.indexOf(a.children,this);if(b+1<a.children.length)return a.children[b+1]}return null},getLayerBeforeNodeRendered:function(){if(this._layerBeforeRender){if(null===this.parent)return this._layerBeforeRender;var a=_.indexOf(this.parent.children,this);return 0>a-
1?this.parent._layerReference:this.parent.children[a-1].getLayerAfterNodeRendered()}return this._layerReference},getLayerAfterNodeRendered:function(){return this._layerAfterRender?this._layerAfterRender:this.hasChildren()?_.last(this.children).getLayerAfterNodeRendered():this._layerReference},addInputListener:function(a){-1===_.indexOf(this._inputListeners,a)&&this._inputListeners.push(a)},removeInputListener:function(a){phet.assert(-1!==_.indexOf(this._inputListeners,a));this._inputListeners.splice(_.indexOf(this._inputListeners,
a),1)},getInputListeners:function(){return this._inputListeners.slice(0)},translate:function(a,f,c){"number"===typeof a?c?this.prependMatrix(b.translation(a,f)):this.appendMatrix(b.translation(a,f)):this.translate(a.x,a.y,f)},scaleBy:function(a,f,c){"number"===typeof a?void 0===f?this.appendMatrix(b.scaling(a,a)):c?this.prependMatrix(b.scaling(a,f)):this.appendMatrix(b.scaling(a,f)):this.scaleBy(a.x,a.y,f)},rotate:function(a,f){f?this.prependMatrix(b.rotation2(a)):this.appendMatrix(b.rotation2(a))},
rotateAround:function(a,f){var c=b.translation(-a.x,-a.y),c=b.rotation2(f).timesMatrix(c),c=b.translation(a.x,a.y).timesMatrix(c);this.prependMatrix(c)},getX:function(){return this.getTranslation().x},setX:function(a){this.setTranslation(a,this.getY());return this},getY:function(){return this.getTranslation().y},setY:function(a){this.setTranslation(this.getX(),a);return this},getScale:function(){return this.transform.getMatrix().scaling()},setScale:function(a,b){var c=this.getScale();"number"===typeof a?
(void 0===b&&(b=a),this.appendMatrix(phet.math.Matrix3.scaling(a/c.x,b/c.y))):this.appendMatrix(phet.math.Matrix3.scaling(a.x/c.x,a.y/c.y));return this},getRotation:function(){return this.transform.getMatrix().rotation()},setRotation:function(a){this.appendMatrix(phet.math.Matrix3.rotation2(a-this.getRotation()));return this},setTranslation:function(a,b){var c=this.getTranslation();"number"===typeof a?this.translate(a-c.x,b-c.y,!0):this.translate(a.x-c.x,a.y-c.y,!0);return this},getTranslation:function(){return this.transform.getMatrix().translation()},
appendMatrix:function(a){this.markOldPaint();this.transform.append(a);this.invalidateBounds();this.invalidatePaint()},prependMatrix:function(a){this.markOldPaint();this.transform.prepend(a);this.invalidateBounds();this.invalidatePaint()},setMatrix:function(a){this.markOldPaint();this.transform.set(a);this.invalidateBounds();this.invalidatePaint()},getMatrix:function(){return this.transform.getMatrix()},getLeft:function(){return this.getBounds().minX},setLeft:function(a){this.translate(a-this.getLeft(),
0,!0);return this},getRight:function(){return this.getBounds().maxX},setRight:function(a){this.translate(a-this.getRight(),0,!0);return this},getCenterX:function(){return this.getBounds().centerX()},setCenterX:function(a){this.translate(a-this.getCenterX(),0,!0);return this},getCenterY:function(){return this.getBounds().centerY()},setCenterY:function(a){this.translate(0,a-this.getCenterY(),!0);return this},getTop:function(){return this.getBounds().minY},setTop:function(a){this.translate(0,a-this.getTop(),
!0);return this},getBottom:function(){return this.getBounds().maxY},setBottom:function(a){this.translate(0,a-this.getBottom(),!0);return this},getWidth:function(){return this.getBounds().width()},getHeight:function(){return this.getBounds().height()},isVisible:function(){return this._visible},setVisible:function(a){a!==this._visible&&(this._visible&&this.markOldSelfPaint(),(this._visible=a)&&this.invalidatePaint());return this},localToParentPoint:function(a){return this.transform.transformPosition2(a)},
localToParentBounds:function(a){return this.transform.transformBounds2(a)},parentToLocalPoint:function(a){return this.transform.inversePosition2(a)},parentToLocalBounds:function(a){return this.transform.inverseBounds2(a)},localToGlobalPoint:function(a){for(var b=this;null!==b;)a=b.transform.transformPosition2(a),b=b.parent;return a},localToGlobalBounds:function(a){for(var b=this;null!==b;)a=b.transform.transformBounds2(a),b=b.parent;return a},globalToLocalPoint:function(a){for(var b=this,c=[];null!==
b;)c.push(b.transform),b=b.parent;for(b=c.length-1;0<=b;b--)a=c[b].inversePosition2(a);return a},globalToLocalBounds:function(a){for(var b=this,c=[];null!==b;)c.push(b.transform),b=b.parent;for(b=c.length-1;0<=b;b--)a=c[b].inverseBounds2(a);return a},set layerType(a){this.setLayerType(a)},get layerType(){return this.getLayerType()},set visible(a){this.setVisible(a)},get visible(){return this.isVisible()},set matrix(a){this.setMatrix(a)},get matrix(){return this.getMatrix()},set translation(a){this.setTranslation(a)},
get translation(){return this.getTranslation()},set rotation(a){this.setRotation(a)},get rotation(){return this.getRotation()},set scale(a){this.setScale(a)},get scale(){return this.getScale()},set x(a){this.setX(a)},get x(){return this.getX()},set y(a){this.setY(a)},get y(){return this.getY()},set left(a){this.setLeft(a)},get left(){return this.getLeft()},set right(a){this.setRight(a)},get right(){return this.getRight()},set top(a){this.setTop(a)},get top(){return this.getTop()},set bottom(a){this.setBottom(a)},
get bottom(){return this.getBottom()},set centerX(a){this.setCenterX(a)},get centerX(){return this.getCenterX()},set centerY(a){this.setCenterY(a)},get centerY(){return this.getCenterY()},get width(){return this.getWidth()},get height(){return this.getHeight()},mutate:function(a){var b=this;_.each(this._mutatorKeys,function(c){void 0!==a[c]&&(b[c]=a[c])})}};d.prototype._mutatorKeys="layerType visible translation x y rotation scale left right top bottom centerX centerY".split(" ")})();
scenery=scenery||{};
(function(){function e(b,a){b.enterState(a);if(b._visible){b.renderSelf(a);var f=b.children;if(a.childRestrictedBounds&&1<f.length){var c=b.globalToLocalBounds(a.childRestrictedBounds);c.containsBounds(b.parentToLocalBounds(b._bounds))||(f=b.getChildrenWithinBounds(c))}_.each(f,function(b){e(b,a)})}b.exitState(a)}scenery.Scene=function(b){this.root=new scenery.Node;this.root._isRoot=!0;this.root.scene=this;this.layers=[];this.inputListeners=[];this.uiLayer=new scenery.DOMLayer({scene:this,main:b});
this.dirtyLayerPath=null;this.main=b;this.sceneBounds=new phet.math.Bounds2(0,0,b.width(),b.height());this.root.setLayerType(scenery.CanvasLayer);var a={userSelect:"none",touchCallout:"none",touchAction:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"};_.each(["-webkit-","-moz-","-ms-","-o-",""],function(f){_.each(a,function(a,d){b.css(f+d,a)})})};var d=scenery.Scene;d.prototype={constructor:d,renderScene:function(){phet.assert(null===this.root.parent);phet.assert(this.root.isLayerRoot());
this.root.validateBounds();this.refreshLayers();var b=new scenery.RenderState(this);e(this.root,b);b.finish();_.each(this.layers,function(a){a.resetDirtyRegions()})},updateScene:function(b){phet.assert(null===this.root.parent);phet.assert(this.root.isLayerRoot());this.root.validateBounds();this.root.validatePaint();this.refreshLayers();var a=this;_.each(this.layers,function(f){f.isDirty()&&(f.getDirtyBounds(),f.getDirtyBounds().intersection(a.sceneBounds).isEmpty()||a.updateLayer(f,b))})},updateLayer:function(b,
a){var f=new scenery.RenderState(this);b.getDirtyBounds();var c=b.getDirtyBounds().intersection(this.sceneBounds);b.prepareDirtyRegions();f.pushClipShape(scenery.Shape.bounds(c));f.childRestrictedBounds=c;f.switchToLayer(b);f.multiLayerRender=!1;b.startNode===b.endNode?(c=b.startNode,_.each(c.getAncestors(),function(a){a.enterState(f)}),e(c,f),f.finish()):this.partialUpdateLayer(f,b,a);b.resetDirtyRegions()},partialUpdateLayer:function(b,a){function f(g,j,m,q){if(!m&&!q)e(g,b);else{g.enterState(b);
if(g._visible){m||g.renderSelf(b);m=!m;var t,s=!1;b.childRestrictedBounds&&1<g.children.length&&(t=g.globalToLocalBounds(b.childRestrictedBounds),s=!t.containsBounds(g.parentToLocalBounds(g._bounds)));for(var u=0;u<g.children.length;u++){var h=g.children[u];if(!s||t.intersectsBounds(h._bounds))if(m){if(q&&d[j]===h){d[j]._layerAfterRender===a&&f(h,j+1,!1,d.length!==j);break}e(h,b)}else c[j]===h&&(c[j]._layerBeforeRender===a&&f(h,j+1,c.length!==j,!1),m=!0)}}g.exitState(b)}}var c=a.startNode.getPathToRoot(),
d=a.endNode.getPathToRoot(),j=Math.min(c.length,d.length),g;for(g=0;g<j&&c[g]===d[g];g++){if(!c[g]._visible)return;2<g&&c[g-2].enterState(b)}f(c[g-1],g,c.length!==g,d.length!==g);b.finish()},renderToCanvas:function(b,a,f){a.clearRect(0,0,b.width,b.height);_.each(this.layers,function(c){c.renderToCanvas(b,a,f)})},clearLayers:function(){this.main.empty();this.layers=[];this.uiLayer.recreate()},createLayer:function(b,a){var f=new b(a);this.layers.push(f);return f},resize:function(b,a){this.main.width(b);
this.main.height(a);this.sceneBounds=new phet.math.Bounds2(0,0,b,a);this.rebuildLayers()},rebuildLayers:function(){function b(a,b,e){c.endNode=a;b=f.createLayer(b,d);e?a._layerBeforeRender=b:a._layerAfterRender=b;b.startNode=a;c.nextLayer=b;b.previousLayer=c;c=b}function a(f,d){var e=null!==f._layerType;e||(f._layerBeforeRender=null,f._layerAfterRender=null);e&&b(f,f._layerType,!0);f._layerReference=c;_.each(f.children,function(b){a(b,d)});e&&b(f,d,!1)}phet.assert(null===this.root.parent);phet.assert(this.root.isLayerRoot());
var f=this,c=null,d={main:this.main,scene:this};this.clearLayers();var e=this.root._layerType,g=f.createLayer(e,d);this.root._layerBeforeRender=g;this.root._layerAfterRender=null;g.startNode=this.root;c=g;this.root._layerReference=g;_.each(this.root.children,function(b){a(b,e)});c.endNode=this.root;this.reindexLayers()},reindexLayers:function(){var b=1;_.each(this.layers,function(a){b=a.reindex(b)});b=this.uiLayer.reindex(b)},clearAllLayers:function(){_.each(this.layers,function(b){b.prepareBounds(phet.math.Bounds2.EVERYTHING)})},
getUILayer:function(){return this.uiLayer},layersDirtyUnder:function(b){if(this.dirtyLayerPath){b=b.getPathToRoot();for(var a=Math.min(b.length,this.dirtyLayerPath.length),f=0;f<a;f++)if(b[f]!==this.dirtyLayerPath[f]){this.dirtyLayerPath=_.first(this.dirtyLayerPath,f);break}}else this.dirtyLayerPath=b.getPathToRoot()},refreshLayers:function(){this.dirtyLayerPath&&(this.rebuildLayers(),this.dirtyLayerPath=null)},addInputListener:function(b){phet.assert(!_.contains(this.inputListeners,b));this.inputListeners.push(b)},
removeInputListener:function(b){b=_.indexOf(this.inputListeners,b);phet.assert(-1!==b);this.inputListeners.splice(b,1)},getInputListeners:function(){return this.inputListeners.slice(0)},initializeStandaloneEvents:function(){var b=this.main[0];this.initializeEvents({preventDefault:!0,listenerTarget:b,pointFromEvent:function(a){var f=b.getBoundingClientRect();return new phet.math.Vector2(a.clientX-f.left,a.clientY-f.top)}})},initializeFullscreenEvents:function(){this.initializeEvents({preventDefault:!0,
listenerTarget:document,pointFromEvent:function(b){return new phet.math.Vector2(b.pageX,b.pageY)}})},initializeEvents:function(b){function a(a,b){for(var c=0;c<a.changedTouches.length;c++){var d=a.changedTouches.item(c);b(d.identifier,f(d))}}var f=b.pointFromEvent,c=b.listenerTarget,d=b.preventDefault,e=new scenery.Input(this);$(c).on("mousedown",function(a){var b=a.originalEvent;d&&a.preventDefault();e.mouseDown(f(b),b)});$(c).on("mouseup",function(a){var b=a.originalEvent;d&&a.preventDefault();
e.mouseUp(f(b),b)});$(c).on("mousemove",function(a){var b=a.originalEvent;d&&a.preventDefault();e.mouseMove(f(b),b)});$(c).on("mouseover",function(a){var b=a.originalEvent;d&&a.preventDefault();e.mouseOver(f(b),b)});$(c).on("mouseout",function(a){var b=a.originalEvent;d&&a.preventDefault();e.mouseOut(f(b),b)});$(c).on("touchstart",function(b){var c=b.originalEvent;d&&b.preventDefault();a(c,function(a,b){e.touchStart(a,b,c)})});$(c).on("touchend",function(b){var c=b.originalEvent;d&&b.preventDefault();
a(c,function(a,b){e.touchEnd(a,b,c)})});$(c).on("touchmove",function(b){var c=b.originalEvent;d&&b.preventDefault();a(c,function(a,b){e.touchMove(a,b,c)})});$(c).on("touchcancel",function(b){var c=b.originalEvent;d&&b.preventDefault();a(c,function(a,b){e.touchCancel(a,b,c)})})},resizeOnWindowResize:function(){var b=this,a=function(){b.resize(window.innerWidth,window.innerHeight)};$(window).resize(a);a()}}})();scenery=scenery||{};
(function(){scenery.Input=function(a){this.scene=a;this.mouse=new b;this.fingers=[this.mouse]};var e=scenery.Input;e.prototype={constructor:e,addFinger:function(a){this.fingers.push(a)},removeFinger:function(a){for(var b=this.fingers.length-1;0<=b;b--)this.fingers[b]===a&&this.fingers.splice(b,1)},findTouchById:function(a){return _.find(this.fingers,function(b){return b.id===a})},mouseDown:function(a,b){this.mouse.down(a,b);this.downEvent(this.mouse,b)},mouseUp:function(a,b){this.mouse.up(a,b);this.upEvent(this.mouse,
b)},mouseMove:function(a,b){this.mouse.move(a,b);this.moveEvent(this.mouse,b)},mouseOver:function(a,b){this.mouse.over(a,b)},mouseOut:function(a,b){this.mouse.out(a,b)},touchStart:function(b,c,d){b=new a(b,c,d);this.addFinger(b);this.downEvent(b,d)},touchEnd:function(a,b,d){a=this.findTouchById(a);a.end(b,d);this.removeFinger(a);this.upEvent(a,d)},touchMove:function(a,b,d){a=this.findTouchById(a);a.move(b,d);this.moveEvent(a,d)},touchCancel:function(a,b,d){a=this.findTouchById(a);a.cancel(b,d);this.removeFinger(a);
this.cancelEvent(a,d)},upEvent:function(a,b){var d=this.scene.root.nodeUnderPoint(a.point),d=null!==d?d.getPathToRoot():[];this.dispatchEvent(d,"up",a,b);a.path=d},downEvent:function(a,b){var d=this.scene.root.nodeUnderPoint(a.point),d=null!==d?d.getPathToRoot():[];this.dispatchEvent(d,"down",a,b);a.path=d},moveEvent:function(a,b){var d=this.scene.root.nodeUnderPoint(a.point),d=null!==d?d.getPathToRoot():[],e=a.path||[],g;for(g=0;g<Math.min(d.length,e.length)&&d[g]===e[g];g++);e.length>g&&this.dispatchEvent(e.slice(g),
"exit",a,b);d.length>g&&this.dispatchEvent(d.slice(g),"enter",a,b);this.dispatchEvent(d,"move",a,b);a.path=d},cancelEvent:function(a,b){var d=this.scene.root.nodeUnderPoint(a.point),d=null!==d?d.getPathToRoot():[];this.dispatchEvent(d,"cancel",a,b);a.path=d},dispatchEvent:function(a,b,d,e){this.dispatchToFinger(b,d,e);this.dispatchToTargets(a,b,d,e);this.dispatchToScene(b,d,e)},dispatchToFinger:function(a,b,d){for(var e=b.listeners.slice(0),g=0;g<e.length;g++){var k=e[g];if(k[a]&&k[a](b,d))break}},
dispatchToTargets:function(a,b,d,e){for(var g=a.length-1;0<=g;g--)for(var k=a[g].getInputListeners(),p=0;p<k.length;p++){var m=k[p];if(m[b]&&m[b](d,e))return}},dispatchToScene:function(a,b,d){for(var e=this.scene.getInputListeners(),g=0;g<e.length;g++){var k=e[g];if(k[a]&&k[a](b,d))break}}};e.Finger=function(){this.listeners=[]};var d=e.Finger;d.prototype={constructor:d,addListener:function(a){phet.assert(!_.contains(this.listeners,a));this.listeners.push(a)},removeListener:function(a){a=_.indexOf(this.listeners,
a);phet.assert(-1!==a);this.listeners.splice(a,1)}};e.Mouse=function(){d.call(this);this.point=null;this.rightDown=this.middleDown=this.leftDown=!1;this.isMouse=!0;this.path=null};var b=e.Mouse;b.prototype=_.extend({},d.prototype,{constructor:b,down:function(a,b){this.point=a;switch(b.button){case 0:this.leftDown=!0;break;case 1:this.middleDown=!0;break;case 2:this.rightDown=!0}},up:function(a,b){this.point=a;switch(b.button){case 0:this.leftDown=!1;break;case 1:this.middleDown=!1;break;case 2:this.rightDown=
!1}},move:function(a){this.point=a},over:function(a){this.point=a},out:function(){this.point=null}});e.Touch=function(a,b){d.call(this);this.id=a;this.point=b;this.isTouch=!0;this.path=null};var a=e.Touch;a.prototype=_.extend({},d.prototype,{constructor:a,move:function(a){this.point=a},end:function(a){this.point=a},cancel:function(a){this.point=a}});e.Key=function(a){d.call(this);this.key=a;this.isKey=!0;this.path=null};e=e.Key;e.prototype=_.extend({},d.prototype,{constructor:e})})();
scenery=scenery||{};
(function(){scenery.RenderState=function(d){this.transform=new phet.math.Transform3;this.layer=null;this.scene=d;this.clipShapes=[];this.multiLayerRender=!0;this.childRestrictedBounds=null};var e=scenery.RenderState;e.prototype={constructor:e,pushClipShape:function(d){this.clipShapes.push(this.transform.transformShape(d));this.layer&&this.layer.pushClipShape(d)},popClipShape:function(){this.clipShapes.pop();this.layer&&this.layer.popClipShape()},switchToLayer:function(d){if(!this.layer||this.multiLayerRender)this.layer&&
this.layer.cooldown(),this.layer=d,d.initialize(this)},finish:function(){this.layer&&this.layer.cooldown()},isCanvasState:function(){return this.layer.isCanvasLayer},isDOMState:function(){return this.layer.isDOMLayer},applyTransformationMatrix:function(d){this.transform.append(d);this.layer.applyTransformationMatrix(d)}}})();scenery=scenery||{};
(function(){var e=phet.math.Bounds2;scenery.CanvasLayer=function(b){var a=b.main,d=document.createElement("canvas");d.width=a.width();d.height=a.height();$(d).css("position","absolute");a.append(d);this.canvas=d;this.context=phet.canvas.initCanvas(d);this.scene=b.scene;this.context.miterLimit=20;this.context.miterLimit=10;this.isCanvasLayer=!0;this.dirtyBounds=e.EVERYTHING;this.resetStyles();this.previousLayer=this.nextLayer=this.endNode=this.startNode=null};var d=scenery.CanvasLayer;d.prototype=
{constructor:d,initialize:function(b){this.context.setTransform(1,0,0,1,0,0);this.context.save();var a=this.context;_.each(b.clipShapes,function(b){a.beginPath();b.writeToContext(a);a.clip()});b.transform.getMatrix().canvasSetTransform(this.context);this.resetStyles()},cooldown:function(){this.context.restore()},isDirty:function(){return!this.dirtyBounds.isEmpty()},applyTransformationMatrix:function(b){b.canvasAppendTransform(this.context)},resetStyles:function(){this.strokeStyle=this.fillStyle=null;
this.lineWidth=1;this.lineCap="butt";this.lineJoin="miter";this.miterLimit=10;this.font="10px sans-serif";this.textAlign="start";this.textBaseline="alphabetic";this.direction="inherit"},reindex:function(b){$(this.canvas).css("z-index",b);this.zIndex=b;return b+1},recreate:function(){this.main.append(this.canvas)},pushClipShape:function(b){this.context.save();this.context.beginPath();b.writeToContext(this.context);this.context.clip()},popClipShape:function(){this.context.restore()},markDirtyRegion:function(b){this.dirtyBounds=
this.dirtyBounds.union(b.dilated(1).roundedOut())},resetDirtyRegions:function(){this.dirtyBounds=e.NOTHING},prepareBounds:function(b){b=b.intersection(new phet.math.Bounds2(0,0,this.canvas.width,this.canvas.height));b.isEmpty()||(this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(b.x(),b.y(),b.width(),b.height()),this.context.restore())},prepareDirtyRegions:function(){this.prepareBounds(this.dirtyBounds)},getDirtyBounds:function(){return this.dirtyBounds},setFillStyle:function(b){this.fillStyle!==
b&&(this.fillStyle=b,this.context.fillStyle=b)},setStrokeStyle:function(b){this.strokeStyle!==b&&(this.strokeStyle=b,this.context.strokeStyle=b)},setLineWidth:function(b){this.lineWidth!==b&&(this.lineWidth=b,this.context.lineWidth=b)},setLineCap:function(b){this.lineCap!==b&&(this.lineCap=b,this.context.lineCap=b)},setLineJoin:function(b){this.lineJoin!==b&&(this.lineJoin=b,this.context.lineJoin=b)},setFont:function(b){this.font!==b&&(this.font=b,this.context.font=b)},setTextAlign:function(b){this.textAlign!==
b&&(this.textAlign=b,this.context.textAlign=b)},setTextBaseline:function(b){this.textBaseline!==b&&(this.textBaseline=b,this.context.textBaseline=b)},setDirection:function(b){this.direction!==b&&(this.direction=b,this.context.direction=b)},renderToCanvas:function(b,a){a.drawImage(this.canvas,0,0)}}})();scenery=scenery||{};
(function(){var e=phet.math.Bounds2;scenery.DOMLayer=function(b){var a=b.main;this.main=a;this.div=document.createElement("div");$(this.div).width(a.width());$(this.div).height(a.height());$(this.div).css("position","absolute");a.append(this.div);this.scene=b.scene;this.dirtyBounds=e.NOTHING;this.isDOMLayer=!0;this.previousLayer=this.nextLayer=null};var d=scenery.DOMLayer;d.prototype={constructor:d,initialize:function(){},cooldown:function(){},recreate:function(){this.main.append(this.div)},isDirty:function(){return!1},
applyTransformationMatrix:function(){},getContainer:function(){return this.div},reindex:function(b){$(this.div).css("z-index",b);this.zIndex=b;return b+1},pushClipShape:function(){},popClipShape:function(){},markDirtyRegion:function(){},resetDirtyRegions:function(){this.dirtyBounds=e.NOTHING},prepareBounds:function(){},prepareDirtyRegions:function(){this.prepareBounds(this.dirtyBounds)},getDirtyBounds:function(){return this.dirtyBounds},renderToCanvas:function(b,a,d){b="<svg xmlns='http://www.w3.org/2000/svg' width='"+
this.main.width()+"' height='"+this.main.height()+"'><foreignObject width='100%' height='100%'>"+$(this.div).html()+"</foreignObject></svg>";var c=window.URL||window.webkitURL||window,e=new Image;b=new Blob([b],{type:"image/svg+xml;charset=utf-8"});var j=c.createObjectURL(b);d.increment();e.onload=function(){a.drawImage(e,0,0);c.revokeObjectURL(j);d.decrement()};e.src=j}}})();scenery=scenery||{};
(function(){scenery.Strokable=function(e){e=e.prototype;e.initializeStrokable=function(){this._stroke=null;this._lineDrawingStyles=new scenery.Shape.LineStyles};e.hasStroke=function(){return null!==this._stroke};e.getLineWidth=function(){return this._lineDrawingStyles.lineWidth};e.setLineWidth=function(d){this.getLineWidth()!==d&&(this.markOldSelfPaint(),this._lineDrawingStyles.lineWidth=d,this.invalidateStroke());return this};e.getLineCap=function(){return this._lineDrawingStyles.lineCap};e.setLineCap=
function(d){this._lineDrawingStyles.lineCap!==d&&(this.markOldSelfPaint(),this._lineDrawingStyles.lineCap=d,this.invalidateStroke());return this};e.getLineJoin=function(){return this._lineDrawingStyles.lineJoin};e.setLineJoin=function(d){this._lineDrawingStyles.lineJoin!==d&&(this.markOldSelfPaint(),this._lineDrawingStyles.lineJoin=d,this.invalidateStroke());return this};e.setLineStyles=function(d){this.markOldSelfPaint();this._lineDrawingStyles=d;this.invalidateStroke();return this};e.getLineStyles=
function(){return this._lineDrawingStyles};e.getStroke=function(){return this._stroke};e.setStroke=function(d){this.getStroke()!==d&&(this.markOldSelfPaint(),this._stroke=d,this.invalidateStroke());return this};e._mutatorKeys=["stroke","lineWidth","lineCap","lineJoin"].concat(e._mutatorKeys);Object.defineProperty(e,"stroke",{set:e.setStroke,get:e.getStroke});Object.defineProperty(e,"lineWidth",{set:e.setLineWidth,get:e.getLineWidth});Object.defineProperty(e,"lineCap",{set:e.setLineCap,get:e.getLineCap});
Object.defineProperty(e,"lineJoin",{set:e.setLineJoin,get:e.getLineJoin});e.invalidateStroke||(e.invalidateStroke=function(){})}})();scenery=scenery||{};
(function(){scenery.Fillable=function(e){e=e.prototype;e.initializeFillable=function(){this._fill=null};e.hasFill=function(){return null!==this._fill};e.getFill=function(){return this._fill};e.setFill=function(d){this.getFill()!==d&&(this._fill=d,this.invalidatePaint(),this.invalidateFill());return this};e._mutatorKeys=["fill"].concat(e._mutatorKeys);Object.defineProperty(e,"fill",{set:e.setFill,get:e.getFill});e.invalidateFill||(e.invalidateFill=function(){})}})();scenery=scenery||{};
(function(){scenery.Path=function(d){this._shape=null;d=d||{};this.initializeStrokable();scenery.Node.call(this,d)};var e=scenery.Path;e.prototype=phet.Object.create(scenery.Node.prototype);e.prototype.constructor=e;e.prototype.setShape=function(d){this._shape!==d&&(this._shape=d,this.invalidateShape());return this};e.prototype.getShape=function(){return this._shape};e.prototype.invalidateShape=function(){this.markOldSelfPaint();this.hasShape()&&(this.invalidateSelf(this._shape.computeBounds(this._stroke?
this._lineDrawingStyles:null)),this.invalidatePaint())};e.prototype.invalidateStroke=function(){this.invalidateShape()};e.prototype.hasShape=function(){return null!==this._shape};e.prototype.renderSelf=function(d){if(this.hasShape())if(d.isCanvasState()){d=d.layer;var b=d.context;b.beginPath();this._shape.writeToContext(b);this._fill&&(d.setFillStyle(this._fill),b.fill());this._stroke&&(d.setStrokeStyle(this._stroke),d.setLineWidth(this.getLineWidth()),d.setLineCap(this.getLineCap()),d.setLineJoin(this.getLineJoin()),
b.stroke())}else throw Error("layer type shape rendering not implemented");};e.prototype.containsPointSelf=function(d){if(!this.hasShape())return!1;var b=this._shape.containsPoint(d);!b&&(this._includeStrokeInHitRegion&&this.hasStroke())&&(b=this._shape.getStrokedShape(this._lineDrawingStyles).containsPoint(d));return b};e.prototype.intersectsBoundsSelf=function(d){return this.hasShape()?this._shape.intersectsBounds(d):!1};e.prototype._mutatorKeys=["shape"].concat(scenery.Node.prototype._mutatorKeys);
Object.defineProperty(e.prototype,"shape",{set:e.prototype.setShape,get:e.prototype.getShape});scenery.Fillable(e);scenery.Strokable(e)})();scenery=scenery||{};
(function(){scenery.Text=function(d,b){this.fontStyles=new e.FontStyles;b=b||{};void 0===b.fill&&(b.fill="#000000");void 0!==d&&(b.text=d);scenery.Node.call(this,b)};var e=scenery.Text;e.prototype=phet.Object.create(scenery.Node.prototype);e.prototype.constructor=e;e.prototype.setText=function(d){this._text=d;this.invalidateText();return this};e.prototype.getText=function(){return this._text};e.prototype.invalidateText=function(){this.invalidateSelf(scenery.canvasTextBoundsAccurate(this._text,this.fontStyles))};
e.prototype.renderSelf=function(d){if(d.isCanvasState()){d=d.layer;var b=d.context;this.hasFill()&&(d.setFillStyle(this.getFill()),d.setFont(this.fontStyles.font),d.setTextAlign(this.fontStyles.textAlign),d.setTextBaseline(this.fontStyles.textBaseline),d.setDirection(this.fontStyles.direction),b.fillText(this._text,0,0))}};e.prototype.setFont=function(d){this.fontStyles.font=d;this.invalidateText();return this};e.prototype.getFont=function(){return this.fontStyles.font};e.prototype.setTextAlign=function(d){this.fontStyles.textAlign=
d;this.invalidateText();return this};e.prototype.getTextAlign=function(){return this.fontStyles.textAlign};e.prototype.setTextBaseline=function(d){this.fontStyles.textBaseline=d;this.invalidateText();return this};e.prototype.getTextBaseline=function(){return this.fontStyles.textBaseline};e.prototype.setDirection=function(d){this.fontStyles.direction=d;this.invalidateText();return this};e.prototype.getDirection=function(){return this.fontStyles.direction};e.prototype._mutatorKeys=["text","font","textAlign",
"textBaseline","direction"].concat(scenery.Node.prototype._mutatorKeys);Object.defineProperty(e.prototype,"text",{set:e.prototype.setText,get:e.prototype.getText});Object.defineProperty(e.prototype,"font",{set:e.prototype.setFont,get:e.prototype.getFont});Object.defineProperty(e.prototype,"textAlign",{set:e.prototype.setTextAlign,get:e.prototype.getTextAlign});Object.defineProperty(e.prototype,"textBaseline",{set:e.prototype.setTextBaseline,get:e.prototype.getTextBaseline});Object.defineProperty(e.prototype,
"direction",{set:e.prototype.setDirection,get:e.prototype.getDirection});scenery.Fillable(e);e.FontStyles=function(d){void 0===d&&(d={});this.font=void 0!==d.font?d.font:"10px sans-serif";this.textAlign=void 0!==d.textAlign?d.textAlign:"start";this.textBaseline=void 0!==d.textBaseline?d.textBaseline:"alphabetic";this.direction=void 0!==d.direction?d.direction:"ltr"}})();scenery=scenery||{};
(function(){scenery.DOM=function(d,b){this._interactive=!1;this._element=d;scenery.Node.call(this,b);this.invalidateDOM()};var e=scenery.DOM;e.prototype=phet.Object.create(scenery.Node.prototype);e.prototype.constructor=e;e.prototype.invalidateDOM=function(){this.invalidateSelf(new phet.math.Bounds2(0,0,$(this._element).width(),$(this._element).height()))};e.prototype.renderSelf=function(d){var b=d.transform.getMatrix().cssTransform();$(this._element).css({"-webkit-transform":b+" translateZ(0)","-moz-transform":b+
" translateZ(0)","-ms-transform":b,"-o-transform":b,transform:b,"transform-origin":"top left","-ms-transform-origin":"top left",position:"absolute",left:0,top:0});d=(d.isDOMState()&&!this._interactive?d.layer:d.scene.getUILayer()).getContainer();this._element.parentNode!==d&&$(d).append(this._element);this.invalidateDOM()};e.prototype.setElement=function(d){this._element=d;this.invalidateDOM();return this};e.prototype.getElement=function(){return this._element};e.prototype.setInteractive=function(d){this._interactive=
d;this.invalidatePaint();return this};e.prototype.isInteractive=function(){return this._interactive};e.prototype._mutatorKeys=["element","interactive"].concat(scenery.Node.prototype._mutatorKeys);Object.defineProperty(e.prototype,"element",{set:e.prototype.setElement,get:e.prototype.getElement});Object.defineProperty(e.prototype,"interactive",{set:e.prototype.setInteractive,get:e.prototype.isInteractive})})();scenery=scenery||{};
(function(){scenery.Image=function(d,b){scenery.Node.call(this,b);this.image=d;this.invalidateSelf(new phet.math.Bounds2(0,0,d.width,d.height))};var e=scenery.Image;e.prototype=phet.Object.create(scenery.Node.prototype);e.prototype.constructor=e;e.prototype.renderSelf=function(d){d.isCanvasState()&&d.layer.context.drawImage(this.image,0,0)}})();scenery=scenery||{};
(function(){function e(a){console.log("context."+a+";")}function d(a,b){e(a+" = "+JSON.stringify(b))}function b(a,b){void 0===b||0===b.length?e(a+"()"):e(a+"( "+_.reduce(b,function(a,b){return 0<a.length?a+", "+JSON.stringify(b):JSON.stringify(b)},"")+" )")}scenery.DebugContext=function(a){this._context=a};var a=scenery.DebugContext;a.prototype={constructor:a,get canvas(){e("canvas");return this._context.canvas},get width(){e("width");return this._context.width},get height(){e("height");return this._context.height},
commit:function(){b("commit");this._context.commit()},save:function(){b("save");this._context.save()},restore:function(){b("restore");this._context.restore()},get currentTransform(){e("currentTransform");return this._context.currentTransform},set currentTransform(a){d("currentTransform",a);this._context.currentTransform=a},scale:function(a,c){b("scale",[a,c]);this._context.scale(a,c)},rotate:function(a){b("rotate",[a]);this._context.rotate(a)},translate:function(a,c){b("translate",[a,c]);this._context.translate(a,
c)},transform:function(a,c,d,e,g,k){b("transform",[a,c,d,e,g,k]);this._context.transform(a,c,d,e,g,k)},setTransform:function(a,c,d,e,g,k){b("setTransform",[a,c,d,e,g,k]);this._context.setTransform(a,c,d,e,g,k)},resetTransform:function(){b("resetTransform");this._context.resetTransform()},get globalAlpha(){e("globalAlpha");return this._context.globalAlpha},set globalAlpha(a){d("globalAlpha",a);this._context.globalAlpha=a},get globalCompositeOperation(){e("globalCompositeOperation");return this._context.globalCompositeOperation},
set globalCompositeOperation(a){d("globalCompositeOperation",a);this._context.globalCompositeOperation=a},get imageSmoothingEnabled(){e("imageSmoothingEnabled");return this._context.imageSmoothingEnabled},set imageSmoothingEnabled(a){d("imageSmoothingEnabled",a);this._context.imageSmoothingEnabled=a},get strokeStyle(){e("strokeStyle");return this._context.strokeStyle},set strokeStyle(a){d("strokeStyle",a);this._context.strokeStyle=a},get fillStyle(){e("fillStyle");return this._context.fillStyle},
set fillStyle(a){d("fillStyle",a);this._context.fillStyle=a},createLinearGradient:function(a,c,d,e){b("createLinearGradient",[a,c,d,e]);return this._context.createLinearGradient(a,c,d,e)},createRadialGradient:function(a,c,d,e,g,k){b("createRadialGradient",[a,c,d,e,g,k]);return this._context.createRadialGradient(a,c,d,e,g,k)},createPattern:function(a,c){b("createPattern",[a,c]);return this._context.createPattern(a,c)},get shadowOffsetX(){e("shadowOffsetX");return this._context.shadowOffsetX},set shadowOffsetX(a){d("shadowOffsetX",
a);this._context.shadowOffsetX=a},get shadowOffsetY(){e("shadowOffsetY");return this._context.shadowOffsetY},set shadowOffsetY(a){d("shadowOffsetY",a);this._context.shadowOffsetY=a},get shadowBlur(){e("shadowBlur");return this._context.shadowBlur},set shadowBlur(a){d("shadowBlur",a);this._context.shadowBlur=a},get shadowColor(){e("shadowColor");return this._context.shadowColor},set shadowColor(a){d("shadowColor",a);this._context.shadowColor=a},clearRect:function(a,c,d,e){b("clearRect",[a,c,d,e]);
this._context.clearRect(a,c,d,e)},fillRect:function(a,c,d,e){b("fillRect",[a,c,d,e]);this._context.fillRect(a,c,d,e)},strokeRect:function(a,c,d,e){b("strokeRect",[a,c,d,e]);this._context.strokeRect(a,c,d,e)},get fillRule(){e("fillRule");return this._context.fillRule},set fillRule(a){d("fillRule",a);this._context.fillRule=a},beginPath:function(){b("beginPath");this._context.beginPath()},fill:function(a){b("fill",a?[a]:void 0);this._context.fill(a)},stroke:function(a){b("stroke",a?[a]:void 0);this._context.stroke(a)},
drawSystemFocusRing:function(a,c){b("drawSystemFocusRing",c?[a,c]:[a]);this._context.drawSystemFocusRing(a,c)},drawCustomFocusRing:function(a,c){b("drawCustomFocusRing",c?[a,c]:[a]);return this._context.drawCustomFocusRing(a,c)},scrollPathIntoView:function(a){b("scrollPathIntoView",a?[a]:void 0);this._context.scrollPathIntoView(a)},clip:function(a){b("clip",a?[a]:void 0);this._context.clip(a)},resetClip:function(){b("resetClip");this._context.resetClip()},isPointInPath:function(a,c,d){b("isPointInPath",
d?[a,c,d]:[a,c]);return this._context.isPointInPath(a,c,d)},fillText:function(a,c,d,e){b("fillText",void 0!==e?[a,c,d,e]:[a,c,d]);this._context.fillText(a,c,d,e)},strokeText:function(a,c,d,e){b("strokeText",void 0!==e?[a,c,d,e]:[a,c,d]);this._context.strokeText(a,c,d,e)},measureText:function(a){b("measureText",[a]);return this._context.measureText(a)},drawImage:function(a,c,d,e,g,k,p,m,q){b("drawImage",void 0!==e?void 0!==k?[a,c,d,e,g,k,p,m,q]:[a,c,d,e,g]:[a,c,d]);this._context.drawImage(a,c,d,e,
g,k,p,m,q)},addHitRegion:function(a){b("addHitRegion",[a]);this._context.addHitRegion(a)},removeHitRegion:function(a){b("removeHitRegion",[a]);this._context.removeHitRegion(a)},createImageData:function(a,c){b("createImageData",void 0!==c?[a,c]:[a]);return this._context.createImageData(a,c)},createImageDataHD:function(a,c){b("createImageDataHD",[a,c]);return this._context.createImageDataHD(a,c)},getImageData:function(a,c,d,e){b("getImageData",[a,c,d,e]);return this._context.getImageData(a,c,d,e)},
getImageDataHD:function(a,c,d,e){b("getImageDataHD",[a,c,d,e]);return this._context.getImageDataHD(a,c,d,e)},putImageData:function(a,c,d,e,g,k,p){b("putImageData",void 0!==e?[a,c,d,e,g,k,p]:[a,c,d]);this._context.putImageData(a,c,d,e,g,k,p)},putImageDataHD:function(a,c,d,e,g,k,p){b("putImageDataHD",void 0!==e?[a,c,d,e,g,k,p]:[a,c,d]);this._context.putImageDataHD(a,c,d,e,g,k,p)},get lineWidth(){e("lineWidth");return this._context.lineWidth},set lineWidth(a){d("lineWidth",a);this._context.lineWidth=
a},get lineCap(){e("lineCap");return this._context.lineCap},set lineCap(a){d("lineCap",a);this._context.lineCap=a},get lineJoin(){e("lineJoin");return this._context.lineJoin},set lineJoin(a){d("lineJoin",a);this._context.lineJoin=a},get miterLimit(){e("miterLimit");return this._context.miterLimit},set miterLimit(a){d("miterLimit",a);this._context.miterLimit=a},setLineDash:function(a){b("setLineDash",[a]);this._context.setLineDash(a)},getLineDash:function(){b("getLineDash");return this._context.getLineDash()},
get lineDashOffset(){e("lineDashOffset");return this._context.lineDashOffset},set lineDashOffset(a){d("lineDashOffset",a);this._context.lineDashOffset=a},get font(){e("font");return this._context.font},set font(a){d("font",a);this._context.font=a},get textAlign(){e("textAlign");return this._context.textAlign},set textAlign(a){d("textAlign",a);this._context.textAlign=a},get textBaseline(){e("textBaseline");return this._context.textBaseline},set textBaseline(a){d("textBaseline",a);this._context.textBaseline=
a},get direction(){e("direction");return this._context.direction},set direction(a){d("direction",a);this._context.direction=a},closePath:function(){b("closePath");this._context.closePath()},moveTo:function(a,c){b("moveTo",[a,c]);this._context.moveTo(a,c)},lineTo:function(a,c){b("lineTo",[a,c]);this._context.lineTo(a,c)},quadraticCurveTo:function(a,c,d,e){b("quadraticCurveTo",[a,c,d,e]);this._context.quadraticCurveTo(a,c,d,e)},bezierCurveTo:function(a,c,d,e,g,k){b("bezierCurveTo",[a,c,d,e,g,k]);this._context.bezierCurveTo(a,
c,d,e,g,k)},arcTo:function(a,c,d,e,g,k,p){b("arcTo",void 0!==k?[a,c,d,e,g,k,p]:[a,c,d,e,g]);this._context.arcTo(a,c,d,e,g,k,p)},rect:function(a,c,d,e){b("rect",[a,c,d,e]);this._context.rect(a,c,d,e)},arc:function(a,c,d,e,g,k){b("arc",[a,c,d,e,g,k]);this._context.arc(a,c,d,e,g,k)},ellipse:function(a,c,d,e,g,k,p,m){b("ellipse",[a,c,d,e,g,k,p,m]);this._context.ellipse(a,c,d,e,g,k,p,m)}}})();

//@ sourceMappingURL=scenery-min.js.map
